{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/christianwang/Developer/ucsbhack/SBHACK26/frontend/src/lib/api.ts"],"sourcesContent":["/**\n * API Service Layer\n * \n * Handles all communication with the backend\n */\n\nconst API_BASE = '/api';\n\n// Direct backend URL for long-running operations (bypasses Next.js proxy timeout)\nconst BACKEND_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001';\nconst BACKEND_API = `${BACKEND_URL}/api`;\n\n// Types\nexport interface Material {\n  id: string;\n  type: string;\n  title: string;\n  file_name: string;\n  total_chunks: number;\n  has_math: boolean;\n  created_at: string;\n}\n\nexport interface Question {\n  id: string;\n  question_index: number;\n  question: string;\n  question_type: string;\n  options: Record<string, string>;\n  correct_answer: string;\n  explanation: string;\n  difficulty: string;\n  topic?: string;\n  chapter?: number;\n}\n\nexport interface Quiz {\n  id: string;\n  name: string;\n  total_questions: number;\n  chapters_covered: number[];\n  difficulty: string;\n  syllabus_aligned: boolean;\n  created_at: string;\n  questions?: Question[];\n}\n\nexport interface Flashcard {\n  id: string;\n  front: string;\n  back: string;\n  topic?: string;\n  chapter?: number;\n  // Alternative properties that may come from LLM generation\n  question?: string;\n  explanation?: string;\n}\n\nexport interface FlashcardSet {\n  id: string;\n  name: string;\n  total_cards: number;\n  chapters_covered: number[];\n  created_at: string;\n  cards?: Flashcard[];\n}\n\n// API Error handling\nclass ApiError extends Error {\n  constructor(public status: number, message: string) {\n    super(message);\n    this.name = 'ApiError';\n  }\n}\n\nasync function handleResponse<T>(response: Response): Promise<T> {\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({ error: 'Unknown error' }));\n    throw new ApiError(response.status, error.error || 'Request failed');\n  }\n  return response.json();\n}\n\n// Retry helper for intermittent failures (database cold starts, network issues)\nasync function withRetry<T>(\n  fn: () => Promise<T>,\n  options: { maxRetries?: number; delayMs?: number; backoff?: boolean } = {}\n): Promise<T> {\n  const { maxRetries = 3, delayMs = 500, backoff = true } = options;\n  let lastError: Error | null = null;\n\n  for (let attempt = 0; attempt < maxRetries; attempt++) {\n    try {\n      return await fn();\n    } catch (err) {\n      lastError = err instanceof Error ? err : new Error(String(err));\n      \n      // Don't retry on client errors (4xx) - only server/network errors\n      if (err instanceof ApiError && err.status >= 400 && err.status < 500) {\n        throw err;\n      }\n      \n      if (attempt < maxRetries - 1) {\n        const delay = backoff ? delayMs * Math.pow(2, attempt) : delayMs;\n        await new Promise(resolve => setTimeout(resolve, delay));\n      }\n    }\n  }\n\n  throw lastError;\n}\n\n// Materials API\nexport const materialsApi = {\n  async list(): Promise<Material[]> {\n    const response = await fetch(`${API_BASE}/materials`);\n    const data = await handleResponse<{ materials: Material[] }>(response);\n    return data.materials;\n  },\n\n  async upload(\n    files: File[],\n    options: { type?: string; title?: string; chapters?: number[] } = {}\n  ): Promise<{ results: Array<{ materialId?: string; success: boolean; error?: string }> }> {\n    const formData = new FormData();\n    files.forEach((file) => formData.append('files', file));\n    if (options.type) formData.append('type', options.type);\n    if (options.title) formData.append('title', options.title);\n    if (options.chapters) formData.append('chapters', JSON.stringify(options.chapters));\n\n    const response = await fetch(`${API_BASE}/materials`, {\n      method: 'POST',\n      body: formData,\n    });\n    return handleResponse(response);\n  },\n\n  async get(materialId: string, includeChunks = false): Promise<Material> {\n    const response = await fetch(`${API_BASE}/materials/${materialId}?includeChunks=${includeChunks}`);\n    const data = await handleResponse<{ material: Material }>(response);\n    return data.material;\n  },\n\n  async delete(materialId: string): Promise<void> {\n    const response = await fetch(`${API_BASE}/materials/${materialId}`, {\n      method: 'DELETE',\n    });\n    await handleResponse(response);\n  },\n\n  async search(\n    query: string,\n    options: { chapters?: number[]; topK?: number } = {}\n  ): Promise<Array<{ id: string; content: string; similarity: number }>> {\n    const response = await fetch(`${API_BASE}/materials/search`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ query, ...options }),\n    });\n    const data = await handleResponse<{ results: Array<{ id: string; content: string; similarity: number }> }>(response);\n    return data.results;\n  },\n};\n\n// Quiz API\nexport const quizApi = {\n  async get(quizId: string): Promise<Quiz & { questions: Question[] }> {\n    const response = await fetch(`${API_BASE}/quiz/${quizId}`);\n    const data = await handleResponse<{ quiz: Quiz & { questions: Question[] } }>(response);\n    return data.quiz;\n  },\n\n  async submit(\n    quizId: string,\n    answers: Record<string, string>\n  ): Promise<{\n    score: { correct: number; total: number; percentage: number };\n    results: Array<{\n      questionId: string;\n      isCorrect: boolean;\n      userAnswer: string;\n      correctAnswer: string;\n      explanation: string;\n    }>;\n  }> {\n    const response = await fetch(`${API_BASE}/quiz/${quizId}/submit`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ answers }),\n    });\n    return handleResponse(response);\n  },\n\n  async delete(quizId: string): Promise<void> {\n    const response = await fetch(`${API_BASE}/quiz/${quizId}`, {\n      method: 'DELETE',\n    });\n    await handleResponse(response);\n  },\n};\n\n// Flashcards API\nexport const flashcardsApi = {\n  async get(setId: string): Promise<FlashcardSet & { cards: Flashcard[] }> {\n    const response = await fetch(`${API_BASE}/flashcards/${setId}`);\n    const data = await handleResponse<{ flashcardSet: FlashcardSet & { cards: Flashcard[] } }>(response);\n    return data.flashcardSet;\n  },\n};\n\n// Practice API - Generate quizzes/flashcards from sections\nexport interface GeneratedQuiz {\n  quizId: string;\n  name: string;\n  description?: string;\n  folderId?: string;\n  questionCount: number;\n  questions: Question[];\n}\n\nexport interface GeneratedFlashcardSet {\n  flashcardSetId: string;\n  name: string;\n  description?: string;\n  folderId?: string;\n  count: number;\n  flashcards: Flashcard[];\n}\n\n// Practice folder types\nexport interface PracticeFolder {\n  id: string;\n  name: string;\n  description?: string;\n  color: string;\n  icon: string;\n  subfolders: PracticeFolder[];\n  createdAt: string;\n}\n\nexport interface SavedQuiz {\n  id: string;\n  name: string;\n  description?: string;\n  total_questions: number;\n  difficulty: string;\n  best_score?: number;\n  attempt_count: number;\n  last_attempted_at?: string;\n  folder_id?: string;\n  created_at: string;\n}\n\nexport interface SavedFlashcardSet {\n  id: string;\n  name: string;\n  description?: string;\n  total_cards: number;\n  mastery_count: number;\n  last_studied_at?: string;\n  folder_id?: string;\n  created_at: string;\n}\n\nexport interface QuizAttempt {\n  id: string;\n  quiz_set_id: string;\n  quiz_name?: string;\n  score: number;\n  total_questions: number;\n  percentage: number;\n  time_taken?: number;\n  completed_at: string;\n}\n\nexport interface PracticeOverview {\n  folders: PracticeFolder[];\n  quizzes: SavedQuiz[];\n  flashcardSets: SavedFlashcardSet[];\n  recentAttempts: QuizAttempt[];\n  stats: {\n    totalQuizzes: number;\n    totalFlashcardSets: number;\n    totalQuestions: number;\n    totalCards: number;\n  };\n}\n\nexport const practiceApi = {\n  // =====================\n  // OVERVIEW & FOLDERS\n  // =====================\n  \n  async getOverview(userId: string): Promise<PracticeOverview> {\n    // Use retry logic for this critical call - handles database cold starts and intermittent failures\n    return withRetry(async () => {\n      const response = await fetch(`${API_BASE}/practice/overview?userId=${userId}`);\n      const data = await handleResponse<PracticeOverview & { success: boolean }>(response);\n      return {\n        folders: data.folders,\n        quizzes: data.quizzes,\n        flashcardSets: data.flashcardSets,\n        recentAttempts: data.recentAttempts,\n        stats: data.stats\n      };\n    }, { maxRetries: 3, delayMs: 500, backoff: true });\n  },\n\n  async listFolders(userId: string): Promise<PracticeFolder[]> {\n    // Use retry logic for this critical call\n    return withRetry(async () => {\n      const response = await fetch(`${API_BASE}/practice/folders?userId=${userId}`);\n      const data = await handleResponse<{ folders: PracticeFolder[] }>(response);\n      return data.folders;\n    }, { maxRetries: 3, delayMs: 500, backoff: true });\n  },\n\n  async createFolder(options: {\n    name: string;\n    userId: string;\n    description?: string;\n    parentFolderId?: string;\n    color?: string;\n    icon?: string;\n  }): Promise<PracticeFolder> {\n    const response = await fetch(`${API_BASE}/practice/folders`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(options),\n    });\n    const data = await handleResponse<{ folder: PracticeFolder }>(response);\n    return data.folder;\n  },\n\n  async updateFolder(folderId: string, options: {\n    name?: string;\n    description?: string;\n    color?: string;\n    icon?: string;\n  }): Promise<PracticeFolder> {\n    const response = await fetch(`${API_BASE}/practice/folders/${folderId}`, {\n      method: 'PUT',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(options),\n    });\n    const data = await handleResponse<{ folder: PracticeFolder }>(response);\n    return data.folder;\n  },\n\n  async deleteFolder(folderId: string): Promise<void> {\n    const response = await fetch(`${API_BASE}/practice/folders/${folderId}`, {\n      method: 'DELETE',\n    });\n    await handleResponse(response);\n  },\n\n  // =====================\n  // QUIZ OPERATIONS\n  // =====================\n\n  async generateQuiz(options: {\n    sectionIds: string[];\n    userId: string;\n    questionCount?: number;\n    questionType?: 'multiple_choice' | 'true_false' | 'short_answer';\n    difficulty?: 'easy' | 'medium' | 'hard' | 'mixed';\n    name?: string;\n    folderId?: string;\n    description?: string;\n  }): Promise<GeneratedQuiz> {\n    // Use direct backend URL to bypass Next.js proxy timeout\n    // LLM-based generation can take 30-90+ seconds\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), 3 * 60 * 1000);\n\n    try {\n      const response = await fetch(`${BACKEND_API}/practice/quizzes/generate`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(options),\n        signal: controller.signal,\n      });\n      clearTimeout(timeoutId);\n      const data = await handleResponse<{ quiz: GeneratedQuiz }>(response);\n      return data.quiz;\n    } catch (err) {\n      clearTimeout(timeoutId);\n      if (err instanceof Error && err.name === 'AbortError') {\n        throw new Error('Quiz generation timed out. Try with fewer questions or smaller content selection.');\n      }\n      throw err;\n    }\n  },\n\n  async getQuiz(quizId: string): Promise<Quiz & { questions: Question[] }> {\n    const response = await fetch(`${API_BASE}/practice/quizzes/${quizId}`);\n    const data = await handleResponse<{ quiz: Quiz & { questions: Question[] } }>(response);\n    return data.quiz;\n  },\n\n  async updateQuiz(quizId: string, options: {\n    name?: string;\n    description?: string;\n    folderId?: string | null;\n  }): Promise<SavedQuiz> {\n    const response = await fetch(`${API_BASE}/practice/quizzes/${quizId}`, {\n      method: 'PUT',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(options),\n    });\n    const data = await handleResponse<{ quiz: SavedQuiz }>(response);\n    return data.quiz;\n  },\n\n  async deleteQuiz(quizId: string): Promise<void> {\n    const response = await fetch(`${API_BASE}/practice/quizzes/${quizId}`, {\n      method: 'DELETE',\n    });\n    await handleResponse(response);\n  },\n\n  async submitQuizAttempt(quizId: string, options: {\n    userId: string;\n    answers: Record<string, string>;\n    timeTaken?: number;\n  }): Promise<{\n    score: { correct: number; total: number; percentage: number };\n    results: Array<{\n      questionId: string;\n      answer: string;\n      isCorrect: boolean;\n      correctAnswer: string;\n      explanation?: string;\n    }>;\n  }> {\n    const response = await fetch(`${API_BASE}/practice/quizzes/${quizId}/attempt`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(options),\n    });\n    return handleResponse(response);\n  },\n\n  async getQuizAttempts(quizId: string): Promise<QuizAttempt[]> {\n    const response = await fetch(`${API_BASE}/practice/quizzes/${quizId}/attempts`);\n    const data = await handleResponse<{ attempts: QuizAttempt[] }>(response);\n    return data.attempts;\n  },\n\n  // =====================\n  // FLASHCARD OPERATIONS\n  // =====================\n\n  async generateFlashcards(options: {\n    sectionIds: string[];\n    userId: string;\n    count?: number;\n    topic?: string;\n    name?: string;\n    folderId?: string;\n    description?: string;\n  }): Promise<GeneratedFlashcardSet> {\n    // Use direct backend URL to bypass Next.js proxy timeout\n    // LLM-based generation can take 30-90+ seconds\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), 3 * 60 * 1000);\n\n    try {\n      const response = await fetch(`${BACKEND_API}/practice/flashcards/generate`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(options),\n        signal: controller.signal,\n      });\n      clearTimeout(timeoutId);\n      const data = await handleResponse<{ flashcardSet: GeneratedFlashcardSet }>(response);\n      return data.flashcardSet;\n    } catch (err) {\n      clearTimeout(timeoutId);\n      if (err instanceof Error && err.name === 'AbortError') {\n        throw new Error('Flashcard generation timed out. Try with fewer cards or smaller content selection.');\n      }\n      throw err;\n    }\n  },\n\n  async getFlashcardSet(setId: string): Promise<FlashcardSet & { cards: Flashcard[] }> {\n    const response = await fetch(`${API_BASE}/practice/flashcards/${setId}`);\n    const data = await handleResponse<{ flashcardSet: FlashcardSet & { cards: Flashcard[] } }>(response);\n    return data.flashcardSet;\n  },\n\n  async updateFlashcardSet(setId: string, options: {\n    name?: string;\n    description?: string;\n    folderId?: string | null;\n  }): Promise<SavedFlashcardSet> {\n    const response = await fetch(`${API_BASE}/practice/flashcards/${setId}`, {\n      method: 'PUT',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(options),\n    });\n    const data = await handleResponse<{ flashcardSet: SavedFlashcardSet }>(response);\n    return data.flashcardSet;\n  },\n\n  async deleteFlashcardSet(setId: string): Promise<void> {\n    const response = await fetch(`${API_BASE}/practice/flashcards/${setId}`, {\n      method: 'DELETE',\n    });\n    await handleResponse(response);\n  },\n\n  async recordFlashcardSession(setId: string, options: {\n    userId: string;\n    cardsStudied: number;\n    cardsMastered?: number;\n    timeSpent?: number;\n  }): Promise<void> {\n    const response = await fetch(`${API_BASE}/practice/flashcards/${setId}/session`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(options),\n    });\n    await handleResponse(response);\n  },\n\n  // Legacy methods for backwards compatibility\n  async getUserQuizzes(userId: string): Promise<Quiz[]> {\n    const response = await fetch(`${API_BASE}/users/${userId}/quizzes`);\n    const data = await handleResponse<{ quizzes: Quiz[] }>(response);\n    return data.quizzes;\n  },\n\n  async getUserFlashcardSets(userId: string): Promise<FlashcardSet[]> {\n    const response = await fetch(`${API_BASE}/users/${userId}/flashcard-sets`);\n    const data = await handleResponse<{ flashcardSets: FlashcardSet[] }>(response);\n    return data.flashcardSets;\n  },\n};\n\n// Folder types\nexport interface FileWarning {\n  type: string;\n  message: string;\n  suggestion: string;\n  fileName?: string;\n}\n\nexport interface FileItem {\n  id: string;\n  name: string;\n  uploadDate: string;\n  materialId?: string;\n  textContent?: string;\n  size?: string;\n  processing?: boolean;\n  warning?: FileWarning;\n}\n\nexport interface MaterialSection {\n  id: string;\n  title: string;\n  description: string;\n  files: FileItem[];\n  type: 'textbook' | 'syllabus' | 'lecture_notes' | 'practice_questions' | 'custom';\n}\n\nexport interface Folder {\n  id: string;\n  name: string;\n  subfolders: Folder[];\n  sections: MaterialSection[];\n}\n\n// Folders API\nexport const foldersApi = {\n  async list(userId: string): Promise<Folder[]> {\n    // Use retry logic for this critical call - handles database cold starts and intermittent failures\n    return withRetry(async () => {\n      const response = await fetch(`${API_BASE}/folders?userId=${userId}`);\n      const data = await handleResponse<{ folders: Folder[] }>(response);\n      return data.folders;\n    }, { maxRetries: 3, delayMs: 500, backoff: true });\n  },\n\n  async create(name: string, userId: string, parentFolderId?: string): Promise<Folder> {\n    const response = await fetch(`${API_BASE}/folders`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ name, userId, parentFolderId }),\n    });\n    const data = await handleResponse<{ folder: Folder }>(response);\n    return data.folder;\n  },\n\n  async update(folderId: string, name: string): Promise<Folder> {\n    const response = await fetch(`${API_BASE}/folders/${folderId}`, {\n      method: 'PUT',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ name }),\n    });\n    const data = await handleResponse<{ folder: Folder }>(response);\n    return data.folder;\n  },\n\n  async delete(folderId: string): Promise<void> {\n    const response = await fetch(`${API_BASE}/folders/${folderId}`, {\n      method: 'DELETE',\n    });\n    await handleResponse(response);\n  },\n\n  async createFolderSection(folderId: string, title: string, description: string, type: string): Promise<MaterialSection> {\n    const response = await fetch(`${API_BASE}/folders/${folderId}/sections`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ title, description, type }),\n    });\n    const data = await handleResponse<{ section: MaterialSection }>(response);\n    return data.section;\n  },\n\n  async deleteSection(sectionId: string): Promise<void> {\n    const response = await fetch(`${API_BASE}/sections/${sectionId}`, {\n      method: 'DELETE',\n    });\n    await handleResponse(response);\n  },\n\n  async uploadFiles(sectionId: string, files: File[]): Promise<{ files: FileItem[]; warnings?: FileWarning[] }> {\n    const formData = new FormData();\n    files.forEach((file) => formData.append('files', file));\n\n    // Use longer timeout for file uploads (5 minutes) since embedding generation takes time\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), 5 * 60 * 1000);\n\n    try {\n      const response = await fetch(`${API_BASE}/sections/${sectionId}/files`, {\n        method: 'POST',\n        body: formData,\n        signal: controller.signal,\n      });\n      clearTimeout(timeoutId);\n      const data = await handleResponse<{ files: FileItem[]; warnings?: FileWarning[] }>(response);\n      return { files: data.files, warnings: data.warnings };\n    } catch (err) {\n      clearTimeout(timeoutId);\n      if (err instanceof Error && err.name === 'AbortError') {\n        throw new Error('Upload timed out. Large files may take several minutes to process.');\n      }\n      throw err;\n    }\n  },\n\n  async deleteFile(fileId: string): Promise<void> {\n    // Guard against temporary file IDs (not valid UUIDs)\n    if (fileId.startsWith('temp-')) {\n      return; // Silently ignore deletion of temp files\n    }\n    const response = await fetch(`${API_BASE}/files/${fileId}`, {\n      method: 'DELETE',\n    });\n    await handleResponse(response);\n  },\n\n  async getFileContent(fileId: string): Promise<{ textContent: string | null; chunkCount?: number; message?: string }> {\n    // Guard against temporary file IDs (not valid UUIDs)\n    if (fileId.startsWith('temp-')) {\n      return { textContent: null, message: 'File is currently being processed...' };\n    }\n    const response = await fetch(`${API_BASE}/files/${fileId}/content`);\n    const data = await handleResponse<{ success: boolean; textContent: string | null; chunkCount?: number; message?: string }>(response);\n    return { textContent: data.textContent, chunkCount: data.chunkCount, message: data.message };\n  },\n\n  async getSection(sectionId: string): Promise<MaterialSection> {\n    const response = await fetch(`${API_BASE}/sections/${sectionId}`);\n    const data = await handleResponse<{ section: MaterialSection }>(response);\n    return data.section;\n  },\n};\n\n// Health check\nexport const healthApi = {\n  async check(): Promise<{ status: string; timestamp: string }> {\n    const response = await fetch(`${API_BASE}/health`);\n    return handleResponse(response);\n  },\n};\n\n// User types and API\nexport interface User {\n  id: string;\n  google_id: string;\n  email: string;\n  name?: string;\n  image?: string;\n  created_at: string;\n  updated_at: string;\n}\n\nexport const usersApi = {\n  async upsert(data: {\n    googleId: string;\n    email: string;\n    name?: string;\n    image?: string;\n  }): Promise<{ user: User; created: boolean }> {\n    const response = await fetch(`${API_BASE}/users/upsert`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(data),\n    });\n    return handleResponse(response);\n  },\n\n  async getByGoogleId(googleId: string): Promise<User> {\n    const response = await fetch(`${API_BASE}/users/by-google-id/${googleId}`);\n    const data = await handleResponse<{ user: User }>(response);\n    return data.user;\n  },\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 498, "column": 0}, "map": {"version":3,"sources":["file:///Users/christianwang/Developer/ucsbhack/SBHACK26/frontend/src/app/practice/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useMemo } from \"react\";\nimport { useSession } from \"next-auth/react\";\nimport {\n  foldersApi,\n  practiceApi,\n  type Folder,\n  type MaterialSection,\n  type GeneratedQuiz,\n  type GeneratedFlashcardSet,\n  type Question,\n  type Flashcard,\n  type PracticeFolder,\n  type SavedQuiz,\n  type SavedFlashcardSet,\n  type PracticeOverview,\n} from \"@/lib/api\";\n\n// View modes for the practice page\ntype ViewMode = 'overview' | 'generate' | 'quiz' | 'flashcards' | 'folder';\n\n// Flattened item for selection\ninterface SelectableItem {\n  id: string;\n  type: 'folder' | 'material';\n  name: string;\n  description?: string;\n  fileCount: number;\n  path: string[];\n  folderId?: string;\n  sectionId?: string;\n}\n\nexport default function PracticePage() {\n  const { data: session } = useSession();\n  const [viewMode, setViewMode] = useState<ViewMode>('overview');\n  \n  // Material folders for generation\n  const [materialFolders, setMaterialFolders] = useState<Folder[]>([]);\n  \n  // Practice data\n  const [practiceOverview, setPracticeOverview] = useState<PracticeOverview | null>(null);\n  const [selectedPracticeFolder, setSelectedPracticeFolder] = useState<string | null>(null);\n  \n  // Loading & error states\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Selection state for generation\n  const [selectedItems, setSelectedItems] = useState<Set<string>>(new Set());\n  const [expandedFolders, setExpandedFolders] = useState<Set<string>>(new Set());\n  \n  // Quiz generation state\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [generationType, setGenerationType] = useState<'quiz' | 'flashcards'>('quiz');\n  const [questionCount, setQuestionCount] = useState(10);\n  const [practiceNameInput, setPracticeNameInput] = useState('');\n  const [saveToPracticeFolder, setSaveToPracticeFolder] = useState<string | null>(null);\n\n  // Generated content state\n  const [generatedQuiz, setGeneratedQuiz] = useState<GeneratedQuiz | null>(null);\n  const [generatedFlashcards, setGeneratedFlashcards] = useState<GeneratedFlashcardSet | null>(null);\n  \n  // Active quiz/flashcard for viewing saved ones\n  const [activeQuizId, setActiveQuizId] = useState<string | null>(null);\n  const [activeFlashcardSetId, setActiveFlashcardSetId] = useState<string | null>(null);\n  const [activeQuiz, setActiveQuiz] = useState<(SavedQuiz & { questions: Question[] }) | null>(null);\n  const [activeFlashcardSet, setActiveFlashcardSet] = useState<(SavedFlashcardSet & { cards: Flashcard[] }) | null>(null);\n\n  // Active folder for folder detail view\n  const [activeFolderId, setActiveFolderId] = useState<string | null>(null);\n  // Track where we came from to navigate back correctly\n  const [previousView, setPreviousView] = useState<ViewMode>('overview');\n  \n  // Quiz taking state\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n  const [selectedAnswers, setSelectedAnswers] = useState<Record<string, string>>({});\n  const [showResults, setShowResults] = useState(false);\n  const [quizStartTime, setQuizStartTime] = useState<number | null>(null);\n  \n  // Flashcard state\n  const [currentCardIndex, setCurrentCardIndex] = useState(0);\n  const [isFlipped, setIsFlipped] = useState(false);\n\n  // Create folder modal\n  const [showCreateFolderModal, setShowCreateFolderModal] = useState(false);\n  const [newFolderName, setNewFolderName] = useState('');\n  const [newFolderDescription, setNewFolderDescription] = useState('');\n  const [newFolderColor, setNewFolderColor] = useState('#6366f1');\n\n  const userId = session?.user?.id;\n\n  // Helper to get hex color for folder (handles both hex and named colors)\n  const getFolderColor = (color: string): string => {\n    // If it's already a hex color, return it\n    if (color?.startsWith('#')) return color;\n    \n    // Map named colors to hex\n    const colorMap: Record<string, string> = {\n      indigo: '#6366f1',\n      blue: '#3b82f6',\n      purple: '#a855f7',\n      pink: '#ec4899',\n      red: '#ef4444',\n      orange: '#f97316',\n      amber: '#f59e0b',\n      green: '#22c55e',\n      teal: '#14b8a6',\n      cyan: '#06b6d4',\n    };\n    return colorMap[color] || '#6366f1';\n  };\n\n  // Load data on mount\n  useEffect(() => {\n    if (userId) {\n      loadData();\n    }\n  }, [userId]);\n\n  const loadData = async () => {\n    if (!userId) return;\n    try {\n      setIsLoading(true);\n      const [overview, folders] = await Promise.all([\n        practiceApi.getOverview(userId),\n        foldersApi.list(userId)\n      ]);\n      setPracticeOverview(overview);\n      setMaterialFolders(folders);\n    } catch (err) {\n      console.error('Failed to load data:', err);\n      setError('Failed to load practice data');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Load specific quiz or flashcard set\n  const loadQuiz = async (quizId: string) => {\n    try {\n      setIsLoading(true);\n      const quiz = await practiceApi.getQuiz(quizId);\n      // Map the quiz to include required SavedQuiz properties\n      const mappedQuiz: SavedQuiz & { questions: Question[] } = {\n        id: quiz.id,\n        name: quiz.name,\n        total_questions: quiz.total_questions,\n        difficulty: quiz.difficulty,\n        created_at: quiz.created_at,\n        attempt_count: 0,\n        questions: quiz.questions || [],\n      };\n      setActiveQuiz(mappedQuiz);\n      setActiveQuizId(quizId);\n      setCurrentQuestionIndex(0);\n      setSelectedAnswers({});\n      setShowResults(false);\n      setQuizStartTime(Date.now());\n      setPreviousView(viewMode); // Track where we came from\n      setViewMode('quiz');\n    } catch (err) {\n      console.error('Failed to load quiz:', err);\n      setError('Failed to load quiz');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const loadFlashcardSet = async (setId: string) => {\n    try {\n      setIsLoading(true);\n      const set = await practiceApi.getFlashcardSet(setId);\n      // Map the set to include required SavedFlashcardSet properties\n      const mappedSet: SavedFlashcardSet & { cards: Flashcard[] } = {\n        id: set.id,\n        name: set.name,\n        total_cards: set.total_cards,\n        created_at: set.created_at,\n        mastery_count: 0,\n        cards: set.cards || [],\n      };\n      setActiveFlashcardSet(mappedSet);\n      setActiveFlashcardSetId(setId);\n      setCurrentCardIndex(0);\n      setIsFlipped(false);\n      setPreviousView(viewMode); // Track where we came from\n      setViewMode('flashcards');\n    } catch (err) {\n      console.error('Failed to load flashcard set:', err);\n      setError('Failed to load flashcards');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Flatten folders and materials into selectable items\n  const flattenedItems = useMemo(() => {\n    const items: SelectableItem[] = [];\n\n    const processFolder = (folder: Folder, path: string[] = []) => {\n      const currentPath = [...path, folder.name];\n      \n      const countFiles = (f: Folder): number => {\n        let count = f.sections.reduce((acc, s) => acc + s.files.length, 0);\n        count += f.subfolders.reduce((acc, sf) => acc + countFiles(sf), 0);\n        return count;\n      };\n\n      items.push({\n        id: `folder-${folder.id}`,\n        type: 'folder',\n        name: folder.name,\n        fileCount: countFiles(folder),\n        path: path,\n        folderId: folder.id,\n      });\n\n      folder.sections.forEach(section => {\n        items.push({\n          id: `material-${section.id}`,\n          type: 'material',\n          name: section.title,\n          description: section.description,\n          fileCount: section.files.length,\n          path: currentPath,\n          sectionId: section.id,\n        });\n      });\n\n      folder.subfolders.forEach(subfolder => {\n        processFolder(subfolder, currentPath);\n      });\n    };\n\n    materialFolders.forEach(folder => processFolder(folder));\n    return items;\n  }, [materialFolders]);\n\n  const materialItems = useMemo(() => \n    flattenedItems.filter(item => item.type === 'material'),\n    [flattenedItems]\n  );\n\n  const selectedFileCount = useMemo(() => {\n    let count = 0;\n    selectedItems.forEach(itemId => {\n      const item = flattenedItems.find(i => i.id === itemId);\n      if (item) {\n        count += item.fileCount;\n      }\n    });\n    return count;\n  }, [selectedItems, flattenedItems]);\n\n  // Toggle functions\n  const toggleSelection = (itemId: string) => {\n    setSelectedItems(prev => {\n      const next = new Set(prev);\n      if (next.has(itemId)) {\n        next.delete(itemId);\n      } else {\n        next.add(itemId);\n      }\n      return next;\n    });\n  };\n\n  const toggleExpand = (folderId: string) => {\n    setExpandedFolders(prev => {\n      const next = new Set(prev);\n      if (next.has(folderId)) {\n        next.delete(folderId);\n      } else {\n        next.add(folderId);\n      }\n      return next;\n    });\n  };\n\n  const selectAll = () => {\n    setSelectedItems(new Set(materialItems.map(m => m.id)));\n  };\n\n  const clearSelection = () => {\n    setSelectedItems(new Set());\n  };\n\n  // Helper to find folder by ID\n  const findFolderById = (folderList: Folder[], folderId: string): Folder | null => {\n    for (const folder of folderList) {\n      if (folder.id === folderId) return folder;\n      const found = findFolderById(folder.subfolders, folderId);\n      if (found) return found;\n    }\n    return null;\n  };\n\n  // Helper to collect all section IDs from a folder\n  const collectSectionIds = (folder: Folder, sectionIds: string[]) => {\n    folder.sections.forEach(s => sectionIds.push(s.id));\n    folder.subfolders.forEach(sf => collectSectionIds(sf, sectionIds));\n  };\n\n  // Handle quiz generation\n  const handleGenerate = async () => {\n    if (selectedItems.size === 0) {\n      setError('Please select at least one folder or material');\n      return;\n    }\n\n    if (!userId) {\n      setError('Please sign in to generate practice content');\n      return;\n    }\n\n    setIsGenerating(true);\n    setError(null);\n\n    try {\n      const sectionIds: string[] = [];\n      selectedItems.forEach(itemId => {\n        const item = flattenedItems.find(i => i.id === itemId);\n        if (item?.sectionId) {\n          sectionIds.push(item.sectionId);\n        } else if (item?.type === 'folder' && item.folderId) {\n          const folder = findFolderById(materialFolders, item.folderId);\n          if (folder) {\n            collectSectionIds(folder, sectionIds);\n          }\n        }\n      });\n\n      if (sectionIds.length === 0) {\n        setError('No materials found in the selected items');\n        return;\n      }\n\n      if (generationType === 'quiz') {\n        const quiz = await practiceApi.generateQuiz({\n          sectionIds,\n          userId,\n          questionCount,\n          questionType: 'multiple_choice',\n          difficulty: 'mixed',\n          name: practiceNameInput || undefined,\n          folderId: saveToPracticeFolder || undefined,\n        });\n        setGeneratedQuiz(quiz);\n        setGeneratedFlashcards(null);\n        setCurrentQuestionIndex(0);\n        setSelectedAnswers({});\n        setShowResults(false);\n        setQuizStartTime(Date.now());\n        setViewMode('quiz');\n        // Refresh overview to show new quiz\n        loadData();\n      } else {\n        const flashcards = await practiceApi.generateFlashcards({\n          sectionIds,\n          userId,\n          count: questionCount,\n          name: practiceNameInput || undefined,\n          folderId: saveToPracticeFolder || undefined,\n        });\n        setGeneratedFlashcards(flashcards);\n        setGeneratedQuiz(null);\n        setCurrentCardIndex(0);\n        setIsFlipped(false);\n        setViewMode('flashcards');\n        // Refresh overview to show new flashcard set\n        loadData();\n      }\n      \n    } catch (err) {\n      console.error('Failed to generate:', err);\n      setError(err instanceof Error ? err.message : 'Failed to generate practice content');\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  // Create practice folder\n  const handleCreateFolder = async () => {\n    if (!newFolderName.trim() || !userId) return;\n\n    try {\n      await practiceApi.createFolder({\n        name: newFolderName.trim(),\n        userId,\n        description: newFolderDescription.trim() || undefined,\n        color: newFolderColor,\n      });\n      setNewFolderName('');\n      setNewFolderDescription('');\n      setNewFolderColor('#6366f1');\n      setShowCreateFolderModal(false);\n      loadData();\n    } catch (err) {\n      console.error('Failed to create folder:', err);\n      setError('Failed to create folder');\n    }\n  };\n\n  // Delete quiz or flashcard set\n  const handleDeleteQuiz = async (quizId: string) => {\n    if (!confirm('Are you sure you want to delete this quiz?')) return;\n    try {\n      await practiceApi.deleteQuiz(quizId);\n      loadData();\n    } catch (err) {\n      console.error('Failed to delete quiz:', err);\n      setError('Failed to delete quiz');\n    }\n  };\n\n  const handleDeleteFlashcardSet = async (setId: string) => {\n    if (!confirm('Are you sure you want to delete this flashcard set?')) return;\n    try {\n      await practiceApi.deleteFlashcardSet(setId);\n      loadData();\n    } catch (err) {\n      console.error('Failed to delete flashcard set:', err);\n      setError('Failed to delete flashcard set');\n    }\n  };\n\n  const handleDeletePracticeFolder = async (folderId: string) => {\n    if (!confirm('Are you sure you want to delete this folder and all its contents?')) return;\n    try {\n      await practiceApi.deleteFolder(folderId);\n      loadData();\n    } catch (err) {\n      console.error('Failed to delete folder:', err);\n      setError('Failed to delete folder');\n    }\n  };\n\n  // Enter a practice folder\n  const handleEnterFolder = (folderId: string) => {\n    setActiveFolderId(folderId);\n    setViewMode('folder');\n  };\n\n  // Navigate from folder to generate with folder pre-selected\n  const handleGenerateFromFolder = (folderId: string) => {\n    setSaveToPracticeFolder(folderId);\n    setPreviousView('folder'); // Remember we came from folder view\n    setViewMode('generate');\n  };\n\n  // Get active folder details\n  const getActiveFolder = () => {\n    if (!activeFolderId || !practiceOverview) return null;\n    return practiceOverview.folders.find(f => f.id === activeFolderId) || null;\n  };\n\n  // Get quizzes and flashcards for the active folder\n  const getFolderQuizzes = () => {\n    if (!activeFolderId || !practiceOverview) return [];\n    return practiceOverview.quizzes.filter(q => q.folder_id === activeFolderId);\n  };\n\n  const getFolderFlashcardSets = () => {\n    if (!activeFolderId || !practiceOverview) return [];\n    return practiceOverview.flashcardSets.filter(f => f.folder_id === activeFolderId);\n  };\n\n  // Quiz navigation\n  const handleSelectAnswer = (questionId: string, answer: string) => {\n    // Ensure questionId is a string for consistent comparison\n    const normalizedId = String(questionId);\n    setSelectedAnswers(prev => ({ ...prev, [normalizedId]: answer }));\n  };\n\n  const handleNextQuestion = () => {\n    const questions = generatedQuiz?.questions || activeQuiz?.questions || [];\n    if (currentQuestionIndex < questions.length - 1) {\n      setCurrentQuestionIndex(prev => prev + 1);\n    }\n  };\n\n  const handlePrevQuestion = () => {\n    if (currentQuestionIndex > 0) {\n      setCurrentQuestionIndex(prev => prev - 1);\n    }\n  };\n\n  const handleSubmitQuiz = async () => {\n    const quizId = generatedQuiz?.quizId || activeQuizId;\n    if (!quizId || !userId) {\n      setShowResults(true);\n      return;\n    }\n\n    try {\n      const timeTaken = quizStartTime ? Math.round((Date.now() - quizStartTime) / 1000) : undefined;\n      await practiceApi.submitQuizAttempt(quizId, {\n        userId,\n        answers: selectedAnswers,\n        timeTaken,\n      });\n      setShowResults(true);\n      loadData(); // Refresh to get updated stats\n    } catch (err) {\n      console.error('Failed to submit quiz:', err);\n      setShowResults(true); // Still show results even if save failed\n    }\n  };\n\n  const handleResetQuiz = () => {\n    setGeneratedQuiz(null);\n    setActiveQuiz(null);\n    setActiveQuizId(null);\n    setSelectedAnswers({});\n    setShowResults(false);\n    setCurrentQuestionIndex(0);\n    // Go back to folder view if we came from there\n    setViewMode(previousView === 'folder' ? 'folder' : 'overview');\n  };\n\n  // Flashcard navigation\n  const handleNextCard = () => {\n    const cards = generatedFlashcards?.flashcards || activeFlashcardSet?.cards || [];\n    if (currentCardIndex < cards.length - 1) {\n      setCurrentCardIndex(prev => prev + 1);\n      setIsFlipped(false);\n    }\n  };\n\n  const handlePrevCard = () => {\n    if (currentCardIndex > 0) {\n      setCurrentCardIndex(prev => prev - 1);\n      setIsFlipped(false);\n    }\n  };\n\n  const handleResetFlashcards = () => {\n    setGeneratedFlashcards(null);\n    setActiveFlashcardSet(null);\n    setActiveFlashcardSetId(null);\n    setCurrentCardIndex(0);\n    setIsFlipped(false);\n    // Go back to folder view if we came from there\n    setViewMode(previousView === 'folder' ? 'folder' : 'overview');\n  };\n\n  // Calculate quiz score\n  const calculateScore = () => {\n    const questions = generatedQuiz?.questions || activeQuiz?.questions || [];\n    if (questions.length === 0) return { correct: 0, total: 0, percentage: 0 };\n    let correct = 0;\n    questions.forEach((q, idx) => {\n      // Ensure consistent ID handling - match how IDs are created in the UI\n      const questionId = q.id ? String(q.id) : `q-${idx}`;\n      if (selectedAnswers[questionId] === q.correct_answer) {\n        correct++;\n      }\n    });\n    return {\n      correct,\n      total: questions.length,\n      percentage: Math.round((correct / questions.length) * 100)\n    };\n  };\n\n  // Render folder tree item for generation\n  const renderFolderTree = (folder: Folder, depth = 0) => {\n    const itemId = `folder-${folder.id}`;\n    const isSelected = selectedItems.has(itemId);\n    const isExpanded = expandedFolders.has(folder.id);\n    const hasContent = folder.sections.length > 0 || folder.subfolders.length > 0;\n\n    const countFiles = (f: Folder): number => {\n      let count = f.sections.reduce((acc, s) => acc + s.files.length, 0);\n      count += f.subfolders.reduce((acc, sf) => acc + countFiles(sf), 0);\n      return count;\n    };\n    const fileCount = countFiles(folder);\n\n    return (\n      <div key={folder.id}>\n        <div\n          className={`flex items-center gap-3 px-3 py-2 cursor-pointer transition ${\n            isSelected ? 'bg-indigo-900/30 border-l-2 border-indigo-500' : 'hover:bg-slate-800/50'\n          }`}\n          style={{ paddingLeft: `${depth * 20 + 12}px` }}\n        >\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              toggleExpand(folder.id);\n            }}\n            className={`w-5 h-5 flex items-center justify-center text-slate-500 hover:text-white transition ${\n              !hasContent ? 'invisible' : ''\n            }`}\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              className={`h-4 w-4 transition-transform ${isExpanded ? 'rotate-90' : ''}`}\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n            </svg>\n          </button>\n\n          <button\n            onClick={() => toggleSelection(itemId)}\n            className={`w-5 h-5 border rounded flex items-center justify-center transition ${\n              isSelected\n                ? 'bg-indigo-600 border-indigo-600'\n                : 'border-slate-600 hover:border-slate-400'\n            }`}\n          >\n            {isSelected && (\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-3 w-3 text-white\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n              </svg>\n            )}\n          </button>\n\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-amber-500\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path d=\"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z\" />\n          </svg>\n\n          <div className=\"flex-1 min-w-0\" onClick={() => toggleSelection(itemId)}>\n            <span className=\"text-white font-medium\">{folder.name}</span>\n            <span className=\"text-slate-500 text-sm ml-2\">\n              {fileCount} file{fileCount !== 1 ? 's' : ''}\n            </span>\n          </div>\n        </div>\n\n        {isExpanded && (\n          <div>\n            {folder.sections.map(section => renderMaterialItem(section, depth + 1))}\n            {folder.subfolders.map(subfolder => renderFolderTree(subfolder, depth + 1))}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  // Render material item for generation\n  const renderMaterialItem = (section: MaterialSection, depth: number) => {\n    const itemId = `material-${section.id}`;\n    const isSelected = selectedItems.has(itemId);\n\n    return (\n      <div\n        key={section.id}\n        className={`flex items-center gap-3 px-3 py-2 cursor-pointer transition ${\n          isSelected ? 'bg-indigo-900/30 border-l-2 border-indigo-500' : 'hover:bg-slate-800/50'\n        }`}\n        style={{ paddingLeft: `${depth * 20 + 12}px` }}\n        onClick={() => toggleSelection(itemId)}\n      >\n        <div className=\"w-5\" />\n\n        <button\n          onClick={(e) => {\n            e.stopPropagation();\n            toggleSelection(itemId);\n          }}\n          className={`w-5 h-5 border rounded flex items-center justify-center transition ${\n            isSelected\n              ? 'bg-indigo-600 border-indigo-600'\n              : 'border-slate-600 hover:border-slate-400'\n          }`}\n        >\n          {isSelected && (\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-3 w-3 text-white\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n              <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n            </svg>\n          )}\n        </button>\n\n        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-slate-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n        </svg>\n\n        <div className=\"flex-1 min-w-0\">\n          <span className=\"text-slate-300\">{section.title}</span>\n          <span className=\"text-slate-500 text-sm ml-2\">\n            {section.files.length} file{section.files.length !== 1 ? 's' : ''}\n          </span>\n        </div>\n      </div>\n    );\n  };\n\n  // Format date helper\n  const formatDate = (dateStr: string) => {\n    const date = new Date(dateStr);\n    return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });\n  };\n\n  if (isLoading && !practiceOverview) {\n    return (\n      <div className=\"h-full flex items-center justify-center\">\n        <div className=\"animate-spin h-8 w-8 border-2 border-white border-t-transparent rounded-full\" />\n      </div>\n    );\n  }\n\n  // =====================\n  // QUIZ VIEW\n  // =====================\n  if (viewMode === 'quiz' && (generatedQuiz || activeQuiz)) {\n    const questions = generatedQuiz?.questions || activeQuiz?.questions || [];\n    const quizName = generatedQuiz?.name || activeQuiz?.name || 'Quiz';\n    const currentQuestion = questions[currentQuestionIndex];\n    const score = calculateScore();\n\n    if (showResults) {\n      return (\n        <div className=\"h-full overflow-auto -mt-4\">\n          <div className=\"max-w-3xl mx-auto\">\n            <div className=\"mb-8 text-center\">\n              <p className=\"text-xs font-semibold uppercase tracking-wide text-indigo-400\">\n                Quiz Complete\n              </p>\n              <h1 className=\"mt-1 text-2xl font-semibold text-white\">\n                {quizName}\n              </h1>\n              <div className=\"mt-4 flex items-center justify-center gap-4\">\n                <div className=\"text-6xl font-bold text-white\">{score.percentage}%</div>\n                <div className=\"text-left\">\n                  <div className=\"text-slate-400\">Score</div>\n                  <div className=\"text-white text-lg\">{score.correct} / {score.total} correct</div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"space-y-4 mb-8\">\n              {questions.map((q, idx) => {\n                // Ensure consistent ID handling - match how IDs are created in the quiz UI\n                const questionId = q.id ? String(q.id) : `q-${idx}`;\n                const userAnswer = selectedAnswers[questionId];\n                const isCorrect = userAnswer === q.correct_answer;\n                return (\n                  <div key={questionId} className={`border p-4 ${isCorrect ? 'border-green-500 bg-green-900/20' : 'border-red-500 bg-red-900/20'}`}>\n                    <div className=\"flex items-start gap-3\">\n                      <span className={`flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-sm ${isCorrect ? 'bg-green-500' : 'bg-red-500'}`}>\n                        {isCorrect ? '' : ''}\n                      </span>\n                      <div className=\"flex-1\">\n                        <p className=\"text-white font-medium\">Q{idx + 1}: {q.question}</p>\n                        <div className=\"mt-2 text-sm\">\n                          <p className=\"text-slate-400\">Your answer: <span className={isCorrect ? 'text-green-400' : 'text-red-400'}>{userAnswer ? `${userAnswer}: ${q.options?.[userAnswer as keyof typeof q.options]}` : 'Not answered'}</span></p>\n                          {!isCorrect && <p className=\"text-slate-400\">Correct answer: <span className=\"text-green-400\">{q.correct_answer}: {q.options?.[q.correct_answer as keyof typeof q.options]}</span></p>}\n                        </div>\n                        {q.explanation && (\n                          <p className=\"mt-2 text-sm text-slate-500 italic\">{q.explanation}</p>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n\n            <div className=\"flex gap-4 justify-center\">\n              <button\n                onClick={handleResetQuiz}\n                className=\"flex items-center gap-2 border border-white px-4 py-2 text-sm font-semibold text-white transition hover:bg-white hover:text-black cursor-pointer\"\n              >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n                </svg>\n                {previousView === 'folder' ? 'Back to Folder' : 'Back to Practice'}\n              </button>\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"h-full overflow-auto -mt-4\">\n        <div className=\"max-w-3xl mx-auto\">\n          <div className=\"mb-6 flex items-center justify-between\">\n            <div>\n              <p className=\"text-xs font-semibold uppercase tracking-wide text-indigo-400\">\n                Question {currentQuestionIndex + 1} of {questions.length}\n              </p>\n              <h1 className=\"mt-1 text-xl font-semibold text-white\">\n                {quizName}\n              </h1>\n            </div>\n            <button\n              onClick={handleResetQuiz}\n              className=\"flex items-center gap-2 border border-white px-4 py-2 text-sm font-semibold text-white transition hover:bg-white hover:text-black cursor-pointer\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n              </svg>\n              {previousView === 'folder' ? 'Back to Folder' : 'Back to Practice'}\n            </button>\n          </div>\n\n          <div className=\"h-2 bg-slate-800 mb-6\">\n            <div \n              className=\"h-full bg-indigo-600 transition-all\"\n              style={{ width: `${((currentQuestionIndex + 1) / questions.length) * 100}%` }}\n            />\n          </div>\n\n          <div className=\"border border-slate-800 bg-black p-6 mb-6\">\n            <p className=\"text-lg text-white mb-6\">{currentQuestion?.question}</p>\n            \n            <div className=\"space-y-3\">\n              {currentQuestion?.options && Object.entries(currentQuestion.options).map(([key, value]) => {\n                // Ensure consistent ID handling\n                const currentQuestionId = currentQuestion.id ? String(currentQuestion.id) : `q-${currentQuestionIndex}`;\n                return (\n                  <button\n                    key={key}\n                    onClick={() => handleSelectAnswer(currentQuestionId, key)}\n                    className={`w-full text-left p-4 border transition cursor-pointer ${\n                      selectedAnswers[currentQuestionId] === key\n                        ? 'border-indigo-500 bg-indigo-900/30'\n                        : 'border-slate-700 hover:border-slate-500'\n                    }`}\n                  >\n                    <span className=\"font-semibold text-indigo-400 mr-3\">{key}.</span>\n                    <span className=\"text-white\">{value}</span>\n                  </button>\n                );\n              })}\n            </div>\n          </div>\n\n          <div className=\"flex items-center justify-between\">\n            <button\n              onClick={handlePrevQuestion}\n              disabled={currentQuestionIndex === 0}\n              className=\"px-4 py-2 border border-slate-700 text-slate-400 hover:text-white hover:border-slate-500 disabled:opacity-50 disabled:cursor-not-allowed transition cursor-pointer\"\n            >\n               Previous\n            </button>\n            \n            <div className=\"flex gap-2\">\n              {questions.map((q, idx) => {\n                // Ensure consistent ID handling\n                const qId = q.id ? String(q.id) : `q-${idx}`;\n                return (\n                  <button\n                    key={idx}\n                    onClick={() => setCurrentQuestionIndex(idx)}\n                    className={`w-8 h-8 text-sm font-medium transition cursor-pointer ${\n                      idx === currentQuestionIndex\n                        ? 'bg-indigo-600 text-white'\n                        : selectedAnswers[qId]\n                          ? 'bg-slate-700 text-white'\n                          : 'bg-slate-800 text-slate-500 hover:bg-slate-700'\n                    }`}\n                  >\n                    {idx + 1}\n                  </button>\n                );\n              })}\n            </div>\n\n            {currentQuestionIndex < questions.length - 1 ? (\n              <button\n                onClick={handleNextQuestion}\n                className=\"px-4 py-2 bg-white text-black font-semibold hover:bg-slate-200 transition cursor-pointer\"\n              >\n                Next \n              </button>\n            ) : (\n              <button\n                onClick={handleSubmitQuiz}\n                className=\"px-4 py-2 bg-green-600 text-white font-semibold hover:bg-green-500 transition cursor-pointer\"\n              >\n                Submit Quiz\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // =====================\n  // FLASHCARDS VIEW\n  // =====================\n  if (viewMode === 'flashcards' && (generatedFlashcards || activeFlashcardSet)) {\n    const cards = generatedFlashcards?.flashcards || activeFlashcardSet?.cards || [];\n    const setName = generatedFlashcards?.name || activeFlashcardSet?.name || 'Flashcards';\n    const currentCard = cards[currentCardIndex];\n\n    if (!currentCard) {\n      return (\n        <div className=\"h-full flex items-center justify-center\">\n          <div className=\"text-center\">\n            <p className=\"text-slate-400 mb-4\">No flashcards found</p>\n            <button\n              onClick={handleResetFlashcards}\n              className=\"flex items-center gap-2 border border-white px-4 py-2 text-sm font-semibold text-white transition hover:bg-white hover:text-black cursor-pointer mx-auto\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n              </svg>\n              {previousView === 'folder' ? 'Back to Folder' : 'Back to Practice'}\n            </button>\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"h-full overflow-auto -mt-4\">\n        <div className=\"max-w-2xl mx-auto\">\n          <div className=\"mb-6 flex items-center justify-between\">\n            <div>\n              <p className=\"text-xs font-semibold uppercase tracking-wide text-indigo-400\">\n                Card {currentCardIndex + 1} of {cards.length}\n              </p>\n              <h1 className=\"mt-1 text-xl font-semibold text-white\">\n                {setName}\n              </h1>\n            </div>\n            <button\n              onClick={handleResetFlashcards}\n              className=\"flex items-center gap-2 border border-white px-4 py-2 text-sm font-semibold text-white transition hover:bg-white hover:text-black cursor-pointer\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n              </svg>\n              {previousView === 'folder' ? 'Back to Folder' : 'Back to Practice'}\n            </button>\n          </div>\n\n          <div className=\"h-2 bg-slate-800 mb-6\">\n            <div \n              className=\"h-full bg-indigo-600 transition-all\"\n              style={{ width: `${((currentCardIndex + 1) / cards.length) * 100}%` }}\n            />\n          </div>\n\n          <div \n            onClick={() => setIsFlipped(!isFlipped)}\n            className=\"cursor-pointer perspective-1000\"\n          >\n            <div className={`flashcard-inner ${isFlipped ? 'flipped' : ''}`} style={{ minHeight: '300px' }}>\n              <div className=\"flashcard-front border border-slate-800 bg-black flex items-center justify-center p-8\">\n                <div className=\"text-center\">\n                  <p className=\"text-xs uppercase tracking-wide text-slate-500 mb-4\">Front</p>\n                  <p className=\"text-xl text-white\">{currentCard.front || currentCard.question}</p>\n                  <p className=\"mt-8 text-sm text-slate-500\">Click to flip</p>\n                </div>\n              </div>\n              <div className=\"flashcard-back border border-slate-800 bg-black flex items-center justify-center p-8\">\n                <div className=\"text-center\">\n                  <p className=\"text-xs uppercase tracking-wide text-slate-500 mb-4\">Back</p>\n                  <p className=\"text-xl text-white\">{currentCard.back || currentCard.explanation}</p>\n                  {currentCard.topic && (\n                    <p className=\"mt-4 text-sm text-indigo-400\">Topic: {currentCard.topic}</p>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"flex items-center justify-between mt-6\">\n            <button\n              onClick={handlePrevCard}\n              disabled={currentCardIndex === 0}\n              className=\"px-4 py-2 border border-slate-700 text-slate-400 hover:text-white hover:border-slate-500 disabled:opacity-50 disabled:cursor-not-allowed transition cursor-pointer\"\n            >\n               Previous\n            </button>\n            \n            <div className=\"text-slate-400 text-sm\">\n              {currentCardIndex + 1} / {cards.length}\n            </div>\n\n            <button\n              onClick={handleNextCard}\n              disabled={currentCardIndex >= cards.length - 1}\n              className=\"px-4 py-2 bg-white text-black font-semibold hover:bg-slate-200 disabled:opacity-50 disabled:cursor-not-allowed transition cursor-pointer\"\n            >\n              Next \n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // =====================\n  // GENERATE VIEW\n  // =====================\n  if (viewMode === 'generate') {\n    return (\n      <div className=\"h-full overflow-hidden -mt-4\">\n        {error && (\n          <div className=\"mb-4 bg-red-900/30 border border-red-500 px-4 py-3 text-red-300 flex justify-between items-center\">\n            <span>{error}</span>\n            <button onClick={() => setError(null)} className=\"text-red-300 hover:text-red-100\"></button>\n          </div>\n        )}\n\n        <div className=\"mb-6 flex items-center justify-between\">\n          <div>\n            <p className=\"text-xs font-semibold uppercase tracking-wide text-indigo-400\">\n              Generate New Practice\n            </p>\n            <h1 className=\"mt-1 text-2xl font-semibold text-white\">\n              Create quizzes and flashcards from your materials\n            </h1>\n          </div>\n          <button\n            onClick={() => setViewMode(previousView === 'folder' ? 'folder' : 'overview')}\n            className=\"flex items-center gap-2 border border-white px-4 py-2 text-sm font-semibold text-white transition hover:bg-white hover:text-black cursor-pointer\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n            </svg>\n            {previousView === 'folder' ? 'Back to Folder' : 'Back to Overview'}\n          </button>\n        </div>\n\n        <div className=\"flex gap-6 h-[calc(100%-100px)]\">\n          {/* Left: Material selection */}\n          <div className=\"flex-1 flex flex-col border border-slate-800 bg-black overflow-hidden\">\n            <div className=\"flex items-center justify-between px-4 py-3 border-b border-slate-800 bg-slate-900/50\">\n              <div className=\"text-sm text-slate-400\">\n                <span className=\"text-white font-medium\">{selectedItems.size}</span> item{selectedItems.size !== 1 ? 's' : ''} selected\n                {selectedFileCount > 0 && (\n                  <span className=\"ml-2\">\n                    (<span className=\"text-white\">{selectedFileCount}</span> file{selectedFileCount !== 1 ? 's' : ''})\n                  </span>\n                )}\n              </div>\n              <div className=\"flex gap-2\">\n                <button onClick={selectAll} className=\"text-xs text-slate-400 hover:text-white transition cursor-pointer\">\n                  Select All\n                </button>\n                <span className=\"text-slate-600\">|</span>\n                <button onClick={clearSelection} className=\"text-xs text-slate-400 hover:text-white transition cursor-pointer\">\n                  Clear\n                </button>\n              </div>\n            </div>\n\n            <div className=\"flex-1 overflow-y-auto\">\n              {materialFolders.length === 0 ? (\n                <div className=\"flex flex-col items-center justify-center h-full text-center p-8\">\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-12 w-12 text-slate-600 mb-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z\" />\n                  </svg>\n                  <p className=\"text-slate-400 mb-2\">No materials yet</p>\n                  <p className=\"text-slate-500 text-sm\">\n                    Upload course materials first to generate practice content.\n                  </p>\n                  <a\n                    href=\"/course-material\"\n                    className=\"mt-4 inline-block bg-white px-4 py-2 text-sm text-black font-semibold hover:bg-slate-200 transition cursor-pointer\"\n                  >\n                    Go to Course Materials\n                  </a>\n                </div>\n              ) : (\n                <div className=\"py-2\">\n                  {materialFolders.map(folder => renderFolderTree(folder))}\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Right: Generation options */}\n          <div className=\"w-80 flex flex-col gap-4\">\n            {/* Name input */}\n            <div className=\"border border-slate-800 bg-black p-4\">\n              <h3 className=\"text-sm font-semibold text-white mb-3\">Name (Optional)</h3>\n              <input\n                type=\"text\"\n                value={practiceNameInput}\n                onChange={(e) => setPracticeNameInput(e.target.value)}\n                placeholder=\"Enter a name...\"\n                className=\"w-full bg-slate-900 border border-slate-700 px-3 py-2 text-white text-sm focus:outline-none focus:border-indigo-500\"\n              />\n            </div>\n\n            {/* Generation type */}\n            <div className=\"border border-slate-800 bg-black p-4\">\n              <h3 className=\"text-sm font-semibold text-white mb-3\">Generation Type</h3>\n              <div className=\"flex gap-2\">\n                <button\n                  onClick={() => setGenerationType('quiz')}\n                  className={`flex-1 py-2 px-3 text-sm font-medium transition cursor-pointer ${\n                    generationType === 'quiz'\n                      ? 'bg-white text-black'\n                      : 'border border-slate-700 text-slate-400 hover:text-white hover:border-slate-500'\n                  }`}\n                >\n                  Quiz\n                </button>\n                <button\n                  onClick={() => setGenerationType('flashcards')}\n                  className={`flex-1 py-2 px-3 text-sm font-medium transition cursor-pointer ${\n                    generationType === 'flashcards'\n                      ? 'bg-white text-black'\n                      : 'border border-slate-700 text-slate-400 hover:text-white hover:border-slate-500'\n                  }`}\n                >\n                  Flashcards\n                </button>\n              </div>\n            </div>\n\n            {/* Question count */}\n            <div className=\"border border-slate-800 bg-black p-4\">\n              <h3 className=\"text-sm font-semibold text-white mb-3\">\n                {generationType === 'quiz' ? 'Number of Questions' : 'Number of Cards'}\n              </h3>\n              <div className=\"flex gap-2\">\n                {[5, 10, 20, 30].map(count => (\n                  <button\n                    key={count}\n                    onClick={() => setQuestionCount(count)}\n                    className={`flex-1 py-2 text-sm font-medium transition cursor-pointer ${\n                      questionCount === count\n                        ? 'bg-indigo-600 text-white'\n                        : 'border border-slate-700 text-slate-400 hover:text-white hover:border-slate-500'\n                    }`}\n                  >\n                    {count}\n                  </button>\n                ))}\n              </div>\n            </div>\n\n            {/* Save to folder */}\n            <div className=\"border border-slate-800 bg-black p-4\">\n              <h3 className=\"text-sm font-semibold text-white mb-3\">Save to Folder (Optional)</h3>\n              <select\n                value={saveToPracticeFolder || ''}\n                onChange={(e) => setSaveToPracticeFolder(e.target.value || null)}\n                className=\"w-full bg-slate-900 border border-slate-700 px-3 py-2 text-white text-sm focus:outline-none focus:border-indigo-500\"\n              >\n                <option value=\"\">No folder</option>\n                {practiceOverview?.folders.map(folder => (\n                  <option key={folder.id} value={folder.id}>{folder.name}</option>\n                ))}\n              </select>\n            </div>\n\n            {/* Generate button */}\n            <button\n              onClick={handleGenerate}\n              disabled={isGenerating || selectedItems.size === 0}\n              className=\"w-full bg-white py-3 text-black font-semibold transition hover:bg-slate-200 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer flex items-center justify-center gap-2\"\n            >\n              {isGenerating ? (\n                <>\n                  <div className=\"animate-spin h-4 w-4 border-2 border-black border-t-transparent rounded-full\" />\n                  Generating...\n                </>\n              ) : (\n                <>\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n                  </svg>\n                  Generate {generationType === 'quiz' ? 'Quiz' : 'Flashcards'}\n                </>\n              )}\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // =====================\n  // FOLDER DETAIL VIEW\n  // =====================\n  if (viewMode === 'folder' && activeFolderId) {\n    const folder = getActiveFolder();\n    const folderQuizzes = getFolderQuizzes();\n    const folderFlashcards = getFolderFlashcardSets();\n\n    if (!folder) {\n      return (\n        <div className=\"h-full flex items-center justify-center\">\n          <div className=\"text-center\">\n            <p className=\"text-slate-400 mb-4\">Folder not found</p>\n            <button\n              onClick={() => {\n                setActiveFolderId(null);\n                setViewMode('overview');\n              }}\n              className=\"flex items-center gap-2 border border-white px-4 py-2 text-sm font-semibold text-white transition hover:bg-white hover:text-black cursor-pointer mx-auto\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n              </svg>\n              Back to Practice\n            </button>\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"h-full overflow-auto -mt-4\">\n        {error && (\n          <div className=\"mb-4 bg-red-900/30 border border-red-500 px-4 py-3 text-red-300 flex justify-between items-center\">\n            <span>{error}</span>\n            <button onClick={() => setError(null)} className=\"text-red-300 hover:text-red-100\"></button>\n          </div>\n        )}\n\n        {/* Header */}\n        <div className=\"mb-6 flex items-center justify-between\">\n          <div className=\"flex items-center gap-4\">\n            <div \n              className=\"w-12 h-12 rounded-lg flex items-center justify-center\"\n              style={{ backgroundColor: `${getFolderColor(folder.color)}20` }}\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-7 w-7\" fill={getFolderColor(folder.color)} viewBox=\"0 0 24 24\">\n                <path d=\"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z\" />\n              </svg>\n            </div>\n            <div>\n              <p className=\"text-xs font-semibold uppercase tracking-wide text-indigo-400\">\n                Practice Folder\n              </p>\n              <h1 className=\"text-2xl font-semibold text-white\">\n                {folder.name}\n              </h1>\n              {folder.description && (\n                <p className=\"text-slate-400 text-sm mt-0.5\">{folder.description}</p>\n              )}\n            </div>\n          </div>\n          <button\n            onClick={() => {\n              setActiveFolderId(null);\n              setViewMode('overview');\n            }}\n            className=\"flex items-center gap-2 border border-white px-4 py-2 text-sm font-semibold text-white transition hover:bg-white hover:text-black cursor-pointer\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n            </svg>\n            Back to Practice\n          </button>\n        </div>\n\n        {/* Generate Button */}\n        <div className=\"mb-6\">\n          <button\n            onClick={() => handleGenerateFromFolder(folder.id)}\n            className=\"bg-white px-6 py-3 text-black font-semibold hover:bg-slate-200 transition cursor-pointer flex items-center gap-2\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n            </svg>\n            Generate Quiz or Flashcards\n          </button>\n        </div>\n\n        {/* Quizzes Section */}\n        <div className=\"mb-8\">\n          <h2 className=\"text-lg font-semibold text-white mb-4 flex items-center gap-2\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-blue-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\n            </svg>\n            Quizzes ({folderQuizzes.length})\n          </h2>\n\n          {folderQuizzes.length === 0 ? (\n            <div className=\"border border-dashed border-slate-700 bg-black p-8 text-center\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-10 w-10 text-slate-600 mx-auto mb-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\n              </svg>\n              <p className=\"text-slate-400 mb-2\">No quizzes yet</p>\n              <p className=\"text-slate-500 text-sm\">Generate a quiz from your course materials.</p>\n            </div>\n          ) : (\n            <div className=\"space-y-3\">\n              {folderQuizzes.map(quiz => (\n                <div \n                  key={quiz.id} \n                  className=\"group flex items-center gap-4 border border-slate-800 bg-black p-4 hover:border-slate-600 hover:bg-slate-900/50 transition cursor-pointer\"\n                  onClick={() => loadQuiz(quiz.id)}\n                >\n                  <div className=\"flex-shrink-0 w-10 h-10 rounded-lg bg-blue-500/20 flex items-center justify-center\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-blue-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\n                    </svg>\n                  </div>\n                  <div className=\"flex-1 min-w-0\">\n                    <h3 className=\"text-white font-medium\">{quiz.name}</h3>\n                    <p className=\"text-slate-500 text-sm\">\n                      {quiz.total_questions} questions  {formatDate(quiz.created_at)}\n                    </p>\n                  </div>\n                  <div className=\"flex items-center gap-4\">\n                    {quiz.best_score !== undefined && quiz.best_score !== null && (\n                      <div className=\"text-right\">\n                        <span className=\"text-white font-semibold\">{quiz.best_score}%</span>\n                        <p className=\"text-slate-500 text-xs\">Best score</p>\n                      </div>\n                    )}\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleDeleteQuiz(quiz.id);\n                      }}\n                      className=\"opacity-0 group-hover:opacity-100 text-slate-500 hover:text-red-400 transition cursor-pointer p-2\"\n                      title=\"Delete quiz\"\n                    >\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                      </svg>\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* Flashcards Section */}\n        <div className=\"mb-8\">\n          <h2 className=\"text-lg font-semibold text-white mb-4 flex items-center gap-2\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-purple-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10\" />\n            </svg>\n            Flashcards ({folderFlashcards.length})\n          </h2>\n\n          {folderFlashcards.length === 0 ? (\n            <div className=\"border border-dashed border-slate-700 bg-black p-8 text-center\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-10 w-10 text-slate-600 mx-auto mb-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10\" />\n              </svg>\n              <p className=\"text-slate-400 mb-2\">No flashcards yet</p>\n              <p className=\"text-slate-500 text-sm\">Generate flashcards from your course materials.</p>\n            </div>\n          ) : (\n            <div className=\"space-y-3\">\n              {folderFlashcards.map(set => (\n                <div \n                  key={set.id} \n                  className=\"group flex items-center gap-4 border border-slate-800 bg-black p-4 hover:border-slate-600 hover:bg-slate-900/50 transition cursor-pointer\"\n                  onClick={() => loadFlashcardSet(set.id)}\n                >\n                  <div className=\"flex-shrink-0 w-10 h-10 rounded-lg bg-purple-500/20 flex items-center justify-center\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-purple-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10\" />\n                    </svg>\n                  </div>\n                  <div className=\"flex-1 min-w-0\">\n                    <h3 className=\"text-white font-medium\">{set.name}</h3>\n                    <p className=\"text-slate-500 text-sm\">\n                      {set.total_cards} cards  {formatDate(set.created_at)}\n                    </p>\n                  </div>\n                  <div className=\"flex items-center gap-4\">\n                    {set.mastery_count > 0 && (\n                      <div className=\"text-right\">\n                        <span className=\"text-white font-semibold\">{set.mastery_count}/{set.total_cards}</span>\n                        <p className=\"text-slate-500 text-xs\">Mastered</p>\n                      </div>\n                    )}\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleDeleteFlashcardSet(set.id);\n                      }}\n                      className=\"opacity-0 group-hover:opacity-100 text-slate-500 hover:text-red-400 transition cursor-pointer p-2\"\n                      title=\"Delete flashcard set\"\n                    >\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                      </svg>\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  // =====================\n  // OVERVIEW VIEW (Default)\n  // =====================\n  return (\n    <div className=\"h-full overflow-auto -mt-4\">\n      {error && (\n        <div className=\"mb-4 bg-red-900/30 border border-red-500 px-4 py-3 text-red-300 flex justify-between items-center\">\n          <span>{error}</span>\n          <button onClick={() => setError(null)} className=\"text-red-300 hover:text-red-100\"></button>\n        </div>\n      )}\n\n      {/* Header */}\n      <div className=\"mb-6\">\n        <p className=\"text-xs font-semibold uppercase tracking-wide text-indigo-400\">\n          Practice Mode\n        </p>\n        <h1 className=\"mt-1 text-2xl font-semibold text-white\">\n          Your Practice Library\n        </h1>\n      </div>\n\n\n      {/* Practice Folders */}\n      <div className=\"mb-8\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h2 className=\"text-lg font-semibold text-white\">Practice Folders</h2>\n        </div>\n\n        <div className=\"space-y-3\">\n          {practiceOverview?.folders.map(folder => {\n            // Calculate folder stats from quizzes and flashcards\n            const folderQuizzes = practiceOverview.quizzes.filter(q => q.folder_id === folder.id);\n            const folderFlashcards = practiceOverview.flashcardSets.filter(f => f.folder_id === folder.id);\n            const quizCount = folderQuizzes.length;\n            const flashcardCount = folderFlashcards.length;\n            \n            // Calculate average quiz score for progress\n            const quizzesWithScores = folderQuizzes.filter(q => q.best_score !== undefined && q.best_score !== null);\n            const avgScore = quizzesWithScores.length > 0 \n              ? Math.round(quizzesWithScores.reduce((acc, q) => acc + (q.best_score || 0), 0) / quizzesWithScores.length)\n              : null;\n            \n            // Calculate flashcard mastery progress\n            const totalCards = folderFlashcards.reduce((acc, f) => acc + f.total_cards, 0);\n            const masteredCards = folderFlashcards.reduce((acc, f) => acc + f.mastery_count, 0);\n            const masteryPercent = totalCards > 0 ? Math.round((masteredCards / totalCards) * 100) : null;\n\n            return (\n              <div \n                key={folder.id} \n                className=\"group flex items-center gap-6 border border-slate-800 bg-black p-5 h-[106px] transition hover:border-slate-600 hover:bg-slate-900/50 cursor-pointer\"\n                onClick={() => handleEnterFolder(folder.id)}\n              >\n                {/* Left: Folder icon */}\n                <div className=\"flex-shrink-0\">\n                  <div \n                    className=\"w-14 h-14 rounded-lg flex items-center justify-center\"\n                    style={{ backgroundColor: `${getFolderColor(folder.color)}20` }}\n                  >\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8\" fill={getFolderColor(folder.color)} viewBox=\"0 0 24 24\">\n                      <path d=\"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z\" />\n                    </svg>\n                  </div>\n                </div>\n\n                {/* Middle: Name and description */}\n                <div className=\"flex-1 min-w-0\">\n                  <h3 className=\"text-lg font-semibold text-white\">{folder.name}</h3>\n                  {folder.description && (\n                    <p className=\"text-slate-400 text-sm mt-0.5 line-clamp-1\">{folder.description}</p>\n                  )}\n                </div>\n\n                {/* Right: Stats */}\n                <div className=\"flex items-center gap-6 flex-shrink-0\">\n                  {/* Quiz count */}\n                  <div className=\"text-center min-w-[80px]\">\n                    <div className=\"flex items-center justify-center gap-1.5\">\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 text-blue-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\n                      </svg>\n                      <span className=\"text-white font-semibold\">{quizCount}</span>\n                    </div>\n                    <p className=\"text-slate-500 text-xs mt-0.5\">Quizzes</p>\n                  </div>\n\n                  {/* Flashcard count */}\n                  <div className=\"text-center min-w-[80px]\">\n                    <div className=\"flex items-center justify-center gap-1.5\">\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 text-purple-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10\" />\n                      </svg>\n                      <span className=\"text-white font-semibold\">{flashcardCount}</span>\n                    </div>\n                    <p className=\"text-slate-500 text-xs mt-0.5\">Flashcards</p>\n                  </div>\n\n                  {/* Progress */}\n                  <div className=\"min-w-[120px]\">\n                    {(avgScore !== null || masteryPercent !== null) ? (\n                      <div>\n                        <div className=\"flex items-center justify-between mb-1\">\n                          <span className=\"text-slate-400 text-xs\">Progress</span>\n                          <span className=\"text-white text-sm font-medium\">\n                            {avgScore !== null ? `${avgScore}%` : masteryPercent !== null ? `${masteryPercent}%` : ''}\n                          </span>\n                        </div>\n                        <div className=\"h-2 bg-slate-800 rounded-full overflow-hidden\">\n                          <div \n                            className=\"h-full bg-gradient-to-r from-indigo-500 to-purple-500 transition-all\"\n                            style={{ width: `${avgScore ?? masteryPercent ?? 0}%` }}\n                          />\n                        </div>\n                      </div>\n                    ) : (\n                      <div className=\"text-center\">\n                        <span className=\"text-slate-500 text-sm\">No progress yet</span>\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Delete button */}\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      handleDeletePracticeFolder(folder.id);\n                    }}\n                    className=\"opacity-0 group-hover:opacity-100 text-slate-500 hover:text-red-400 transition cursor-pointer p-2\"\n                    title=\"Delete folder\"\n                  >\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                    </svg>\n                  </button>\n                </div>\n              </div>\n            );\n          })}\n\n          {/* Add Folder - Full Width */}\n          {!showCreateFolderModal ? (\n            <button\n              onClick={() => setShowCreateFolderModal(true)}\n              className=\"w-full flex items-center justify-center gap-3 border border-dashed border-slate-700 bg-black p-5 h-[106px] text-slate-500 hover:text-slate-300 hover:border-slate-500 hover:bg-slate-900/50 transition cursor-pointer\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M12 4v16m8-8H4\" />\n              </svg>\n              <span className=\"font-semibold\">Add Practice Folder</span>\n            </button>\n          ) : (\n            <div className=\"border border-slate-800 bg-black p-5 h-[106px]\">\n              <div className=\"flex items-center gap-6\">\n                {/* Left: Folder icon placeholder */}\n                <div className=\"flex-shrink-0\">\n                  <div \n                    className=\"w-14 h-14 rounded-lg flex items-center justify-center\"\n                    style={{ backgroundColor: `${newFolderColor}20` }}\n                  >\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8\" fill={newFolderColor} viewBox=\"0 0 24 24\">\n                      <path d=\"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z\" />\n                    </svg>\n                  </div>\n                </div>\n\n                {/* Right: Form fields */}\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-4\">\n                    {/* Color Picker */}\n                    <div className=\"flex-shrink-0\">\n                      <label className=\"relative cursor-pointer group\">\n                        <input\n                          type=\"color\"\n                          value={newFolderColor}\n                          onChange={(e) => setNewFolderColor(e.target.value)}\n                          className=\"sr-only\"\n                        />\n                        <div \n                          className=\"w-10 h-10 rounded-full border-2 border-slate-600 group-hover:border-white group-hover:scale-110 transition cursor-pointer\"\n                          style={{ \n                            background: 'conic-gradient(from 0deg, #ff0000, #ff8000, #ffff00, #80ff00, #00ff00, #00ff80, #00ffff, #0080ff, #0000ff, #8000ff, #ff00ff, #ff0080, #ff0000)'\n                          }}\n                        />\n                      </label>\n                    </div>\n\n                    {/* Folder Name */}\n                    <div className=\"flex-1\">\n                      <input\n                        type=\"text\"\n                        value={newFolderName}\n                        onChange={(e) => setNewFolderName(e.target.value)}\n                        onKeyDown={(e) => {\n                          if (e.key === \"Enter\" && newFolderName.trim()) {\n                            handleCreateFolder();\n                          } else if (e.key === \"Escape\") {\n                            setShowCreateFolderModal(false);\n                            setNewFolderName(\"\");\n                            setNewFolderDescription(\"\");\n                            setNewFolderColor(\"#6366f1\");\n                          }\n                        }}\n                        placeholder=\"Folder name...\"\n                        className=\"w-full bg-slate-800 border border-slate-700 px-3 py-2.5 text-sm text-white placeholder-slate-500 focus:border-white focus:outline-none focus:ring-1 focus:ring-white\"\n                        autoFocus\n                      />\n                    </div>\n\n                    {/* Description */}\n                    <div className=\"flex-1\">\n                      <input\n                        type=\"text\"\n                        value={newFolderDescription}\n                        onChange={(e) => setNewFolderDescription(e.target.value)}\n                        onKeyDown={(e) => {\n                          if (e.key === \"Enter\" && newFolderName.trim()) {\n                            handleCreateFolder();\n                          } else if (e.key === \"Escape\") {\n                            setShowCreateFolderModal(false);\n                            setNewFolderName(\"\");\n                            setNewFolderDescription(\"\");\n                            setNewFolderColor(\"#6366f1\");\n                          }\n                        }}\n                        placeholder=\"Description (optional)...\"\n                        className=\"w-full bg-slate-800 border border-slate-700 px-3 py-2.5 text-sm text-white placeholder-slate-500 focus:border-white focus:outline-none focus:ring-1 focus:ring-white\"\n                      />\n                    </div>\n\n                    {/* Action Buttons */}\n                    <div className=\"flex gap-2\">\n                      <button\n                        onClick={handleCreateFolder}\n                        disabled={!newFolderName.trim()}\n                        className=\"bg-white border border-white px-5 py-2.5 text-sm font-semibold text-black transition hover:bg-black hover:text-white disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer\"\n                      >\n                        Create\n                      </button>\n                      <button\n                        onClick={() => {\n                          setShowCreateFolderModal(false);\n                          setNewFolderName(\"\");\n                          setNewFolderDescription(\"\");\n                          setNewFolderColor(\"#6366f1\");\n                        }}\n                        className=\"border border-slate-600 px-5 py-2.5 text-sm font-semibold text-slate-400 transition hover:border-white hover:text-white cursor-pointer\"\n                      >\n                        Cancel\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}