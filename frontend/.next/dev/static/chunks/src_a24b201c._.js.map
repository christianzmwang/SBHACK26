{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/christianwang/Developer/ucsbhack/SBHACK26/frontend/src/lib/api.ts"],"sourcesContent":["/**\n * API Service Layer\n * \n * Handles all communication with the backend\n */\n\nconst API_BASE = '/api';\n\n// Direct backend URL for long-running operations (bypasses Next.js proxy timeout)\nconst BACKEND_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001';\nconst BACKEND_API = `${BACKEND_URL}/api`;\n\n// Types\nexport interface Material {\n  id: string;\n  type: string;\n  title: string;\n  file_name: string;\n  total_chunks: number;\n  has_math: boolean;\n  created_at: string;\n}\n\nexport interface Question {\n  id: string;\n  question_index: number;\n  question: string;\n  question_type: string;\n  options: Record<string, string>;\n  correct_answer: string;\n  explanation: string;\n  difficulty: string;\n  topic?: string;\n  chapter?: number;\n}\n\nexport interface Quiz {\n  id: string;\n  name: string;\n  total_questions: number;\n  chapters_covered: number[];\n  difficulty: string;\n  syllabus_aligned: boolean;\n  created_at: string;\n  questions?: Question[];\n}\n\nexport interface Flashcard {\n  id: string;\n  front: string;\n  back: string;\n  topic?: string;\n  chapter?: number;\n  // Alternative properties that may come from LLM generation\n  question?: string;\n  explanation?: string;\n}\n\nexport interface FlashcardSet {\n  id: string;\n  name: string;\n  total_cards: number;\n  chapters_covered: number[];\n  created_at: string;\n  cards?: Flashcard[];\n}\n\n// API Error handling\nclass ApiError extends Error {\n  constructor(public status: number, message: string) {\n    super(message);\n    this.name = 'ApiError';\n  }\n}\n\nasync function handleResponse<T>(response: Response): Promise<T> {\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({ error: 'Unknown error' }));\n    throw new ApiError(response.status, error.error || 'Request failed');\n  }\n  return response.json();\n}\n\n// Retry helper for intermittent failures (database cold starts, network issues)\nasync function withRetry<T>(\n  fn: () => Promise<T>,\n  options: { maxRetries?: number; delayMs?: number; backoff?: boolean } = {}\n): Promise<T> {\n  const { maxRetries = 3, delayMs = 500, backoff = true } = options;\n  let lastError: Error | null = null;\n\n  for (let attempt = 0; attempt < maxRetries; attempt++) {\n    try {\n      return await fn();\n    } catch (err) {\n      lastError = err instanceof Error ? err : new Error(String(err));\n      \n      // Don't retry on client errors (4xx) - only server/network errors\n      if (err instanceof ApiError && err.status >= 400 && err.status < 500) {\n        throw err;\n      }\n      \n      if (attempt < maxRetries - 1) {\n        const delay = backoff ? delayMs * Math.pow(2, attempt) : delayMs;\n        await new Promise(resolve => setTimeout(resolve, delay));\n      }\n    }\n  }\n\n  throw lastError;\n}\n\n// Materials API\nexport const materialsApi = {\n  async list(): Promise<Material[]> {\n    const response = await fetch(`${API_BASE}/materials`);\n    const data = await handleResponse<{ materials: Material[] }>(response);\n    return data.materials;\n  },\n\n  async upload(\n    files: File[],\n    options: { type?: string; title?: string; chapters?: number[] } = {}\n  ): Promise<{ results: Array<{ materialId?: string; success: boolean; error?: string }> }> {\n    const formData = new FormData();\n    files.forEach((file) => formData.append('files', file));\n    if (options.type) formData.append('type', options.type);\n    if (options.title) formData.append('title', options.title);\n    if (options.chapters) formData.append('chapters', JSON.stringify(options.chapters));\n\n    const response = await fetch(`${API_BASE}/materials`, {\n      method: 'POST',\n      body: formData,\n    });\n    return handleResponse(response);\n  },\n\n  async get(materialId: string, includeChunks = false): Promise<Material> {\n    const response = await fetch(`${API_BASE}/materials/${materialId}?includeChunks=${includeChunks}`);\n    const data = await handleResponse<{ material: Material }>(response);\n    return data.material;\n  },\n\n  async delete(materialId: string): Promise<void> {\n    const response = await fetch(`${API_BASE}/materials/${materialId}`, {\n      method: 'DELETE',\n    });\n    await handleResponse(response);\n  },\n\n  async search(\n    query: string,\n    options: { chapters?: number[]; topK?: number } = {}\n  ): Promise<Array<{ id: string; content: string; similarity: number }>> {\n    const response = await fetch(`${API_BASE}/materials/search`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ query, ...options }),\n    });\n    const data = await handleResponse<{ results: Array<{ id: string; content: string; similarity: number }> }>(response);\n    return data.results;\n  },\n};\n\n// Quiz API\nexport const quizApi = {\n  async get(quizId: string): Promise<Quiz & { questions: Question[] }> {\n    const response = await fetch(`${API_BASE}/quiz/${quizId}`);\n    const data = await handleResponse<{ quiz: Quiz & { questions: Question[] } }>(response);\n    return data.quiz;\n  },\n\n  async submit(\n    quizId: string,\n    answers: Record<string, string>\n  ): Promise<{\n    score: { correct: number; total: number; percentage: number };\n    results: Array<{\n      questionId: string;\n      isCorrect: boolean;\n      userAnswer: string;\n      correctAnswer: string;\n      explanation: string;\n    }>;\n  }> {\n    const response = await fetch(`${API_BASE}/quiz/${quizId}/submit`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ answers }),\n    });\n    return handleResponse(response);\n  },\n\n  async delete(quizId: string): Promise<void> {\n    const response = await fetch(`${API_BASE}/quiz/${quizId}`, {\n      method: 'DELETE',\n    });\n    await handleResponse(response);\n  },\n};\n\n// Flashcards API\nexport const flashcardsApi = {\n  async get(setId: string): Promise<FlashcardSet & { cards: Flashcard[] }> {\n    const response = await fetch(`${API_BASE}/flashcards/${setId}`);\n    const data = await handleResponse<{ flashcardSet: FlashcardSet & { cards: Flashcard[] } }>(response);\n    return data.flashcardSet;\n  },\n};\n\n// Practice API - Generate quizzes/flashcards from sections\nexport interface GeneratedQuiz {\n  quizId: string;\n  name: string;\n  description?: string;\n  folderId?: string;\n  questionCount: number;\n  questions: Question[];\n}\n\nexport interface GeneratedFlashcardSet {\n  flashcardSetId: string;\n  name: string;\n  description?: string;\n  folderId?: string;\n  count: number;\n  flashcards: Flashcard[];\n}\n\n// Practice folder types\nexport interface PracticeFolder {\n  id: string;\n  name: string;\n  description?: string;\n  color: string;\n  icon: string;\n  subfolders: PracticeFolder[];\n  createdAt: string;\n}\n\nexport interface SavedQuiz {\n  id: string;\n  name: string;\n  description?: string;\n  total_questions: number;\n  difficulty: string;\n  best_score?: number;\n  attempt_count: number;\n  last_attempted_at?: string;\n  folder_id?: string;\n  created_at: string;\n}\n\nexport interface SavedFlashcardSet {\n  id: string;\n  name: string;\n  description?: string;\n  total_cards: number;\n  mastery_count: number;\n  last_studied_at?: string;\n  folder_id?: string;\n  created_at: string;\n}\n\nexport interface QuizAttempt {\n  id: string;\n  quiz_set_id: string;\n  quiz_name?: string;\n  score: number;\n  total_questions: number;\n  percentage: number;\n  time_taken?: number;\n  completed_at: string;\n}\n\nexport interface PracticeOverview {\n  folders: PracticeFolder[];\n  quizzes: SavedQuiz[];\n  flashcardSets: SavedFlashcardSet[];\n  recentAttempts: QuizAttempt[];\n  stats: {\n    totalQuizzes: number;\n    totalFlashcardSets: number;\n    totalQuestions: number;\n    totalCards: number;\n  };\n}\n\nexport const practiceApi = {\n  // =====================\n  // OVERVIEW & FOLDERS\n  // =====================\n  \n  async getOverview(userId: string): Promise<PracticeOverview> {\n    // Use retry logic for this critical call - handles database cold starts and intermittent failures\n    return withRetry(async () => {\n      const response = await fetch(`${API_BASE}/practice/overview?userId=${userId}`);\n      const data = await handleResponse<PracticeOverview & { success: boolean }>(response);\n      return {\n        folders: data.folders,\n        quizzes: data.quizzes,\n        flashcardSets: data.flashcardSets,\n        recentAttempts: data.recentAttempts,\n        stats: data.stats\n      };\n    }, { maxRetries: 3, delayMs: 500, backoff: true });\n  },\n\n  async listFolders(userId: string): Promise<PracticeFolder[]> {\n    // Use retry logic for this critical call\n    return withRetry(async () => {\n      const response = await fetch(`${API_BASE}/practice/folders?userId=${userId}`);\n      const data = await handleResponse<{ folders: PracticeFolder[] }>(response);\n      return data.folders;\n    }, { maxRetries: 3, delayMs: 500, backoff: true });\n  },\n\n  async createFolder(options: {\n    name: string;\n    userId: string;\n    description?: string;\n    parentFolderId?: string;\n    color?: string;\n    icon?: string;\n  }): Promise<PracticeFolder> {\n    const response = await fetch(`${API_BASE}/practice/folders`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(options),\n    });\n    const data = await handleResponse<{ folder: PracticeFolder }>(response);\n    return data.folder;\n  },\n\n  async updateFolder(folderId: string, options: {\n    name?: string;\n    description?: string;\n    color?: string;\n    icon?: string;\n  }): Promise<PracticeFolder> {\n    const response = await fetch(`${API_BASE}/practice/folders/${folderId}`, {\n      method: 'PUT',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(options),\n    });\n    const data = await handleResponse<{ folder: PracticeFolder }>(response);\n    return data.folder;\n  },\n\n  async deleteFolder(folderId: string): Promise<void> {\n    const response = await fetch(`${API_BASE}/practice/folders/${folderId}`, {\n      method: 'DELETE',\n    });\n    await handleResponse(response);\n  },\n\n  // =====================\n  // QUIZ OPERATIONS\n  // =====================\n\n  async generateQuiz(options: {\n    sectionIds: string[];\n    userId: string;\n    questionCount?: number;\n    questionType?: 'multiple_choice' | 'true_false' | 'short_answer';\n    difficulty?: 'easy' | 'medium' | 'hard' | 'mixed';\n    name?: string;\n    folderId?: string;\n    description?: string;\n  }): Promise<GeneratedQuiz> {\n    // Use direct backend URL to bypass Next.js proxy timeout\n    // LLM-based generation can take 30-90+ seconds\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), 3 * 60 * 1000);\n\n    try {\n      const response = await fetch(`${BACKEND_API}/practice/quizzes/generate`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(options),\n        signal: controller.signal,\n      });\n      clearTimeout(timeoutId);\n      const data = await handleResponse<{ quiz: GeneratedQuiz }>(response);\n      return data.quiz;\n    } catch (err) {\n      clearTimeout(timeoutId);\n      if (err instanceof Error && err.name === 'AbortError') {\n        throw new Error('Quiz generation timed out. Try with fewer questions or smaller content selection.');\n      }\n      throw err;\n    }\n  },\n\n  async getQuiz(quizId: string): Promise<Quiz & { questions: Question[] }> {\n    const response = await fetch(`${API_BASE}/practice/quizzes/${quizId}`);\n    const data = await handleResponse<{ quiz: Quiz & { questions: Question[] } }>(response);\n    return data.quiz;\n  },\n\n  async updateQuiz(quizId: string, options: {\n    name?: string;\n    description?: string;\n    folderId?: string | null;\n  }): Promise<SavedQuiz> {\n    const response = await fetch(`${API_BASE}/practice/quizzes/${quizId}`, {\n      method: 'PUT',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(options),\n    });\n    const data = await handleResponse<{ quiz: SavedQuiz }>(response);\n    return data.quiz;\n  },\n\n  async deleteQuiz(quizId: string): Promise<void> {\n    const response = await fetch(`${API_BASE}/practice/quizzes/${quizId}`, {\n      method: 'DELETE',\n    });\n    await handleResponse(response);\n  },\n\n  async submitQuizAttempt(quizId: string, options: {\n    userId: string;\n    answers: Record<string, string>;\n    timeTaken?: number;\n  }): Promise<{\n    score: { correct: number; total: number; percentage: number };\n    results: Array<{\n      questionId: string;\n      answer: string;\n      isCorrect: boolean;\n      correctAnswer: string;\n      explanation?: string;\n    }>;\n  }> {\n    const response = await fetch(`${API_BASE}/practice/quizzes/${quizId}/attempt`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(options),\n    });\n    return handleResponse(response);\n  },\n\n  async getQuizAttempts(quizId: string): Promise<QuizAttempt[]> {\n    const response = await fetch(`${API_BASE}/practice/quizzes/${quizId}/attempts`);\n    const data = await handleResponse<{ attempts: QuizAttempt[] }>(response);\n    return data.attempts;\n  },\n\n  // =====================\n  // FLASHCARD OPERATIONS\n  // =====================\n\n  async generateFlashcards(options: {\n    sectionIds: string[];\n    userId: string;\n    count?: number;\n    topic?: string;\n    name?: string;\n    folderId?: string;\n    description?: string;\n  }): Promise<GeneratedFlashcardSet> {\n    // Use direct backend URL to bypass Next.js proxy timeout\n    // LLM-based generation can take 30-90+ seconds\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), 3 * 60 * 1000);\n\n    try {\n      const response = await fetch(`${BACKEND_API}/practice/flashcards/generate`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(options),\n        signal: controller.signal,\n      });\n      clearTimeout(timeoutId);\n      const data = await handleResponse<{ flashcardSet: GeneratedFlashcardSet }>(response);\n      return data.flashcardSet;\n    } catch (err) {\n      clearTimeout(timeoutId);\n      if (err instanceof Error && err.name === 'AbortError') {\n        throw new Error('Flashcard generation timed out. Try with fewer cards or smaller content selection.');\n      }\n      throw err;\n    }\n  },\n\n  async getFlashcardSet(setId: string): Promise<FlashcardSet & { cards: Flashcard[] }> {\n    const response = await fetch(`${API_BASE}/practice/flashcards/${setId}`);\n    const data = await handleResponse<{ flashcardSet: FlashcardSet & { cards: Flashcard[] } }>(response);\n    return data.flashcardSet;\n  },\n\n  async updateFlashcardSet(setId: string, options: {\n    name?: string;\n    description?: string;\n    folderId?: string | null;\n  }): Promise<SavedFlashcardSet> {\n    const response = await fetch(`${API_BASE}/practice/flashcards/${setId}`, {\n      method: 'PUT',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(options),\n    });\n    const data = await handleResponse<{ flashcardSet: SavedFlashcardSet }>(response);\n    return data.flashcardSet;\n  },\n\n  async deleteFlashcardSet(setId: string): Promise<void> {\n    const response = await fetch(`${API_BASE}/practice/flashcards/${setId}`, {\n      method: 'DELETE',\n    });\n    await handleResponse(response);\n  },\n\n  async recordFlashcardSession(setId: string, options: {\n    userId: string;\n    cardsStudied: number;\n    cardsMastered?: number;\n    timeSpent?: number;\n  }): Promise<void> {\n    const response = await fetch(`${API_BASE}/practice/flashcards/${setId}/session`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(options),\n    });\n    await handleResponse(response);\n  },\n\n  // Legacy methods for backwards compatibility\n  async getUserQuizzes(userId: string): Promise<Quiz[]> {\n    const response = await fetch(`${API_BASE}/users/${userId}/quizzes`);\n    const data = await handleResponse<{ quizzes: Quiz[] }>(response);\n    return data.quizzes;\n  },\n\n  async getUserFlashcardSets(userId: string): Promise<FlashcardSet[]> {\n    const response = await fetch(`${API_BASE}/users/${userId}/flashcard-sets`);\n    const data = await handleResponse<{ flashcardSets: FlashcardSet[] }>(response);\n    return data.flashcardSets;\n  },\n};\n\n// Folder types\nexport interface FileWarning {\n  type: string;\n  message: string;\n  suggestion: string;\n  fileName?: string;\n}\n\nexport interface FileItem {\n  id: string;\n  name: string;\n  uploadDate: string;\n  materialId?: string;\n  textContent?: string;\n  size?: string;\n  processing?: boolean;\n  warning?: FileWarning;\n}\n\nexport interface MaterialSection {\n  id: string;\n  title: string;\n  description: string;\n  files: FileItem[];\n  type: 'textbook' | 'syllabus' | 'lecture_notes' | 'practice_questions' | 'custom';\n}\n\nexport interface Folder {\n  id: string;\n  name: string;\n  subfolders: Folder[];\n  sections: MaterialSection[];\n}\n\n// Folders API\nexport const foldersApi = {\n  async list(userId: string): Promise<Folder[]> {\n    // Use retry logic for this critical call - handles database cold starts and intermittent failures\n    return withRetry(async () => {\n      const response = await fetch(`${API_BASE}/folders?userId=${userId}`);\n      const data = await handleResponse<{ folders: Folder[] }>(response);\n      return data.folders;\n    }, { maxRetries: 3, delayMs: 500, backoff: true });\n  },\n\n  async create(name: string, userId: string, parentFolderId?: string): Promise<Folder> {\n    const response = await fetch(`${API_BASE}/folders`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ name, userId, parentFolderId }),\n    });\n    const data = await handleResponse<{ folder: Folder }>(response);\n    return data.folder;\n  },\n\n  async update(folderId: string, name: string): Promise<Folder> {\n    const response = await fetch(`${API_BASE}/folders/${folderId}`, {\n      method: 'PUT',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ name }),\n    });\n    const data = await handleResponse<{ folder: Folder }>(response);\n    return data.folder;\n  },\n\n  async delete(folderId: string): Promise<void> {\n    const response = await fetch(`${API_BASE}/folders/${folderId}`, {\n      method: 'DELETE',\n    });\n    await handleResponse(response);\n  },\n\n  async createFolderSection(folderId: string, title: string, description: string, type: string): Promise<MaterialSection> {\n    const response = await fetch(`${API_BASE}/folders/${folderId}/sections`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ title, description, type }),\n    });\n    const data = await handleResponse<{ section: MaterialSection }>(response);\n    return data.section;\n  },\n\n  async deleteSection(sectionId: string): Promise<void> {\n    const response = await fetch(`${API_BASE}/sections/${sectionId}`, {\n      method: 'DELETE',\n    });\n    await handleResponse(response);\n  },\n\n  async uploadFiles(sectionId: string, files: File[]): Promise<{ files: FileItem[]; warnings?: FileWarning[] }> {\n    const formData = new FormData();\n    files.forEach((file) => formData.append('files', file));\n\n    // Use longer timeout for file uploads (5 minutes) since embedding generation takes time\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), 5 * 60 * 1000);\n\n    try {\n      const response = await fetch(`${API_BASE}/sections/${sectionId}/files`, {\n        method: 'POST',\n        body: formData,\n        signal: controller.signal,\n      });\n      clearTimeout(timeoutId);\n      const data = await handleResponse<{ files: FileItem[]; warnings?: FileWarning[] }>(response);\n      return { files: data.files, warnings: data.warnings };\n    } catch (err) {\n      clearTimeout(timeoutId);\n      if (err instanceof Error && err.name === 'AbortError') {\n        throw new Error('Upload timed out. Large files may take several minutes to process.');\n      }\n      throw err;\n    }\n  },\n\n  async deleteFile(fileId: string): Promise<void> {\n    // Guard against temporary file IDs (not valid UUIDs)\n    if (fileId.startsWith('temp-')) {\n      return; // Silently ignore deletion of temp files\n    }\n    const response = await fetch(`${API_BASE}/files/${fileId}`, {\n      method: 'DELETE',\n    });\n    await handleResponse(response);\n  },\n\n  async getFileContent(fileId: string): Promise<{ textContent: string | null; chunkCount?: number; message?: string }> {\n    // Guard against temporary file IDs (not valid UUIDs)\n    if (fileId.startsWith('temp-')) {\n      return { textContent: null, message: 'File is currently being processed...' };\n    }\n    const response = await fetch(`${API_BASE}/files/${fileId}/content`);\n    const data = await handleResponse<{ success: boolean; textContent: string | null; chunkCount?: number; message?: string }>(response);\n    return { textContent: data.textContent, chunkCount: data.chunkCount, message: data.message };\n  },\n\n  async getSection(sectionId: string): Promise<MaterialSection> {\n    const response = await fetch(`${API_BASE}/sections/${sectionId}`);\n    const data = await handleResponse<{ section: MaterialSection }>(response);\n    return data.section;\n  },\n};\n\n// Health check\nexport const healthApi = {\n  async check(): Promise<{ status: string; timestamp: string }> {\n    const response = await fetch(`${API_BASE}/health`);\n    return handleResponse(response);\n  },\n};\n\n// User types and API\nexport interface User {\n  id: string;\n  google_id: string;\n  email: string;\n  name?: string;\n  image?: string;\n  created_at: string;\n  updated_at: string;\n}\n\nexport const usersApi = {\n  async upsert(data: {\n    googleId: string;\n    email: string;\n    name?: string;\n    image?: string;\n  }): Promise<{ user: User; created: boolean }> {\n    const response = await fetch(`${API_BASE}/users/upsert`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(data),\n    });\n    return handleResponse(response);\n  },\n\n  async getByGoogleId(googleId: string): Promise<User> {\n    const response = await fetch(`${API_BASE}/users/by-google-id/${googleId}`);\n    const data = await handleResponse<{ user: User }>(response);\n    return data.user;\n  },\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 498, "column": 0}, "map": {"version":3,"sources":["file:///Users/christianwang/Developer/ucsbhack/SBHACK26/frontend/src/app/course-material/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, Suspense } from \"react\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport { useSession } from \"next-auth/react\";\nimport { \n  foldersApi,\n  type Folder,\n} from \"@/lib/api\";\n\nfunction CourseMaterialContent() {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const { data: session } = useSession();\n  const [folders, setFolders] = useState<Folder[]>([]);\n  const [folderPath, setFolderPath] = useState<Folder[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [initialPathRestored, setInitialPathRestored] = useState(false);\n\n  const currentFolder = folderPath.length > 0 ? folderPath[folderPath.length - 1] : null;\n  const userId = session?.user?.id;\n\n  // Form states\n  const [isAddingFolder, setIsAddingFolder] = useState(false);\n  const [newFolderName, setNewFolderName] = useState(\"\");\n  const [isAddingMaterial, setIsAddingMaterial] = useState(false);\n  const [newMaterialName, setNewMaterialName] = useState(\"\");\n  const [newMaterialDescription, setNewMaterialDescription] = useState(\"\");\n\n  // Load folders on mount\n  useEffect(() => {\n    if (userId) {\n      loadFolders();\n    }\n  }, [userId]);\n\n  // Restore folder path from URL params after folders are loaded\n  useEffect(() => {\n    if (folders.length > 0 && !initialPathRestored) {\n      const foldersParam = searchParams.get('folders');\n      if (foldersParam) {\n        const folderIds = foldersParam.split(',');\n        const path = buildFolderPath(folders, folderIds);\n        if (path.length > 0) {\n          setFolderPath(path);\n        }\n        // Clear the URL params after restoring\n        router.replace('/course-material', { scroll: false });\n      }\n      setInitialPathRestored(true);\n    }\n  }, [folders, searchParams, initialPathRestored, router]);\n\n  // Helper to build folder path from IDs\n  const buildFolderPath = (folderList: Folder[], folderIds: string[]): Folder[] => {\n    const path: Folder[] = [];\n    let currentList = folderList;\n    \n    for (const id of folderIds) {\n      const folder = currentList.find(f => f.id === id);\n      if (folder) {\n        path.push(folder);\n        currentList = folder.subfolders;\n      } else {\n        break;\n      }\n    }\n    \n    return path;\n  };\n\n  const loadFolders = async () => {\n    if (!userId) return;\n    try {\n      setIsLoading(true);\n      const loadedFolders = await foldersApi.list(userId);\n      setFolders(loadedFolders);\n    } catch (err) {\n      console.error('Failed to load folders:', err);\n      setError('Failed to load folders');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Helper to update nested folder structure\n  const updateFolderAtPath = (\n    folderList: Folder[],\n    path: Folder[],\n    updateFn: (folder: Folder) => Folder\n  ): Folder[] => {\n    if (path.length === 0) return folderList;\n    \n    const [current, ...rest] = path;\n    \n    return folderList.map((folder) => {\n      if (folder.id === current.id) {\n        if (rest.length === 0) {\n          return updateFn(folder);\n        } else {\n          return {\n            ...folder,\n            subfolders: updateFolderAtPath(folder.subfolders, rest, updateFn),\n          };\n        }\n      }\n      return folder;\n    });\n  };\n\n  // Folder actions\n  const handleAddFolder = async () => {\n    if (!newFolderName.trim() || !userId) return;\n\n    try {\n      setIsLoading(true);\n      const newFolder = await foldersApi.create(newFolderName.trim(), userId);\n      setFolders((prev) => [...prev, newFolder]);\n      setNewFolderName(\"\");\n      setIsAddingFolder(false);\n    } catch (err) {\n      console.error('Failed to create folder:', err);\n      setError('Failed to create folder');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleAddSubfolder = async () => {\n    if (!newFolderName.trim() || !currentFolder || !userId) return;\n\n    try {\n      setIsLoading(true);\n      const newSubfolder = await foldersApi.create(newFolderName.trim(), userId, currentFolder.id);\n      \n      setFolders((prev) =>\n        updateFolderAtPath(prev, folderPath, (folder) => ({\n          ...folder,\n          subfolders: [...folder.subfolders, newSubfolder],\n        }))\n      );\n      \n      setFolderPath((prev) => {\n        const updated = [...prev];\n        if (updated.length > 0) {\n          updated[updated.length - 1] = {\n            ...updated[updated.length - 1],\n            subfolders: [...updated[updated.length - 1].subfolders, newSubfolder],\n          };\n        }\n        return updated;\n      });\n      \n      setNewFolderName(\"\");\n      setIsAddingFolder(false);\n    } catch (err) {\n      console.error('Failed to create subfolder:', err);\n      setError('Failed to create subfolder');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleDeleteFolder = async (folderId: string) => {\n    try {\n      await foldersApi.delete(folderId);\n      setFolders((prev) => prev.filter((f) => f.id !== folderId));\n    } catch (err) {\n      console.error('Failed to delete folder:', err);\n      setError('Failed to delete folder');\n    }\n  };\n\n  const handleDeleteSubfolder = async (subfolderId: string) => {\n    if (!currentFolder) return;\n\n    try {\n      await foldersApi.delete(subfolderId);\n      \n      setFolders((prev) =>\n        updateFolderAtPath(prev, folderPath, (folder) => ({\n          ...folder,\n          subfolders: folder.subfolders.filter((sf) => sf.id !== subfolderId),\n        }))\n      );\n      \n      setFolderPath((prev) => {\n        const updated = [...prev];\n        if (updated.length > 0) {\n          updated[updated.length - 1] = {\n            ...updated[updated.length - 1],\n            subfolders: updated[updated.length - 1].subfolders.filter((sf) => sf.id !== subfolderId),\n          };\n        }\n        return updated;\n      });\n    } catch (err) {\n      console.error('Failed to delete subfolder:', err);\n      setError('Failed to delete subfolder');\n    }\n  };\n\n  // Material actions\n  const handleAddMaterial = async () => {\n    if (!newMaterialName.trim() || !currentFolder) return;\n\n    try {\n      setIsLoading(true);\n      const newSection = await foldersApi.createFolderSection(\n        currentFolder.id,\n        newMaterialName.trim(),\n        newMaterialDescription.trim() || \"Material\",\n        'custom'\n      );\n      \n      setFolders((prev) =>\n        updateFolderAtPath(prev, folderPath, (folder) => ({\n          ...folder,\n          sections: [...folder.sections, newSection],\n        }))\n      );\n      \n      setFolderPath((prev) => {\n        const updated = [...prev];\n        if (updated.length > 0) {\n          updated[updated.length - 1] = {\n            ...updated[updated.length - 1],\n            sections: [...updated[updated.length - 1].sections, newSection],\n          };\n        }\n        return updated;\n      });\n      \n      setNewMaterialName(\"\");\n      setNewMaterialDescription(\"\");\n      setIsAddingMaterial(false);\n    } catch (err) {\n      console.error('Failed to create material:', err);\n      setError('Failed to create material');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleDeleteMaterial = async (sectionId: string) => {\n    if (!currentFolder) return;\n\n    try {\n      await foldersApi.deleteSection(sectionId);\n\n      setFolders((prev) =>\n        updateFolderAtPath(prev, folderPath, (folder) => ({\n          ...folder,\n          sections: folder.sections.filter((s) => s.id !== sectionId),\n        }))\n      );\n      \n      setFolderPath((prev) => {\n        const updated = [...prev];\n        if (updated.length > 0) {\n          updated[updated.length - 1] = {\n            ...updated[updated.length - 1],\n            sections: updated[updated.length - 1].sections.filter((s) => s.id !== sectionId),\n          };\n        }\n        return updated;\n      });\n    } catch (err) {\n      console.error('Failed to delete material:', err);\n      setError('Failed to delete material');\n    }\n  };\n\n  // Navigate to preview page with folder context\n  const handleNavigateToPreview = (sectionId: string) => {\n    // Pass the current folder path as query params so we can navigate back correctly\n    const folderIds = folderPath.map(f => f.id).join(',');\n    const url = folderIds \n      ? `/course-material/preview/${sectionId}?folders=${folderIds}`\n      : `/course-material/preview/${sectionId}`;\n    router.push(url);\n  };\n\n  // Navigation\n  const handleBackToFolders = () => {\n    setFolderPath([]);\n  };\n\n  const handleNavigateToPathIndex = (index: number) => {\n    if (index < 0) {\n      handleBackToFolders();\n    } else {\n      setFolderPath((prev) => prev.slice(0, index + 1));\n    }\n  };\n\n  const handleEnterSubfolder = (subfolder: Folder) => {\n    setFolderPath((prev) => [...prev, subfolder]);\n  };\n\n  // Count files in folder (including subfolders)\n  const countFilesInFolder = (folder: Folder): number => {\n    let count = folder.sections.reduce((acc, s) => acc + s.files.length, 0);\n    count += folder.subfolders.reduce((acc, sf) => acc + countFilesInFolder(sf), 0);\n    return count;\n  };\n\n  // Render breadcrumb\n  const renderBreadcrumb = () => (\n    <div className=\"flex items-center gap-2 text-sm mb-6 flex-wrap\">\n      <button\n        onClick={handleBackToFolders}\n        className={`transition ${\n          folderPath.length === 0\n            ? \"text-white font-semibold\"\n            : \"text-slate-400 hover:text-white cursor-pointer\"\n        }`}\n      >\n        Folders\n      </button>\n      {folderPath.map((folder, index) => (\n        <span key={folder.id} className=\"flex items-center gap-2\">\n          <span className=\"text-slate-600\">/</span>\n          <button\n            onClick={() => {\n              if (index < folderPath.length - 1) {\n                handleNavigateToPathIndex(index);\n              }\n            }}\n            className={`transition ${\n              index === folderPath.length - 1\n                ? \"text-white font-semibold\"\n                : \"text-slate-400 hover:text-white cursor-pointer\"\n            }`}\n          >\n            {folder.name}\n          </button>\n        </span>\n      ))}\n    </div>\n  );\n\n  // Render folders view (root level)\n  const renderFoldersView = () => (\n    <section className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4\">\n      {folders.map((folder) => {\n        const materialCount = folder.sections.length;\n        \n        return (\n          <div\n            key={folder.id}\n            role=\"button\"\n            tabIndex={0}\n            onClick={() => setFolderPath([folder])}\n            onKeyDown={(e) => {\n              if (e.key === \"Enter\" || e.key === \" \") {\n                e.preventDefault();\n                setFolderPath([folder]);\n              }\n            }}\n            className=\"group relative flex flex-col items-center justify-center border border-slate-800 bg-black p-6 h-[220px] transition hover:border-slate-600 hover:bg-slate-900/50 cursor-pointer text-left\"\n          >\n            <button\n              onClick={(e) => {\n                e.stopPropagation();\n                handleDeleteFolder(folder.id);\n              }}\n              className=\"absolute top-3 right-3 text-slate-600 hover:text-red-400 transition opacity-0 group-hover:opacity-100 cursor-pointer\"\n              title=\"Delete folder\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n              </svg>\n            </button>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-12 w-12 text-amber-500 mb-3\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path d=\"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z\" />\n            </svg>\n            <span className=\"text-white font-semibold text-center\">{folder.name}</span>\n            <span className=\"text-slate-500 text-xs mt-1\">\n              {folder.subfolders.length > 0 && (\n                <>{folder.subfolders.length} folder{folder.subfolders.length !== 1 ? \"s\" : \"\"}{materialCount > 0 && \", \"}</>\n              )}\n              {materialCount > 0 && (\n                <>{materialCount} material{materialCount !== 1 ? \"s\" : \"\"}</>\n              )}\n              {folder.subfolders.length === 0 && materialCount === 0 && \"Empty\"}\n            </span>\n          </div>\n        );\n      })}\n\n      {/* Add Folder Card */}\n      <div className=\"h-[220px]\">\n        {!isAddingFolder ? (\n          <button\n            onClick={() => setIsAddingFolder(true)}\n            className=\"flex h-full w-full flex-col items-center justify-center text-slate-500 hover:text-slate-300 border border-slate-800 border-dashed bg-black hover:border-slate-600 hover:bg-slate-900/50 transition cursor-pointer p-6\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-10 w-10 mb-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M12 4v16m8-8H4\" />\n            </svg>\n            <span className=\"text-sm font-semibold\">Add Folder</span>\n            <span className=\"mt-1 text-xs\">Organize your materials</span>\n          </button>\n        ) : (\n          <div className=\"flex h-full flex-col justify-between border border-slate-800 bg-black p-5\">\n            <div>\n              <h3 className=\"text-base font-semibold text-white\">New Folder</h3>\n            </div>\n            <div className=\"flex flex-col justify-center\">\n              <input\n                type=\"text\"\n                value={newFolderName}\n                onChange={(e) => setNewFolderName(e.target.value)}\n                onKeyDown={(e) => {\n                  if (e.key === \"Enter\" && newFolderName.trim()) {\n                    handleAddFolder();\n                  } else if (e.key === \"Escape\") {\n                    setIsAddingFolder(false);\n                    setNewFolderName(\"\");\n                  }\n                }}\n                placeholder=\"e.g., Fall 2025, Math 101\"\n                className=\"w-full bg-slate-800 border border-slate-700 px-3 py-2.5 text-sm text-white placeholder-slate-500 focus:border-white focus:outline-none focus:ring-1 focus:ring-white\"\n                autoFocus\n              />\n            </div>\n            <div className=\"flex gap-2 mt-2\">\n              <button\n                onClick={handleAddFolder}\n                disabled={!newFolderName.trim()}\n                className=\"flex-1 bg-white border border-white px-3 py-2.5 text-xs font-semibold uppercase tracking-wide text-black transition hover:bg-black hover:text-white disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer\"\n              >\n                Create\n              </button>\n              <button\n                onClick={() => {\n                  setIsAddingFolder(false);\n                  setNewFolderName(\"\");\n                }}\n                className=\"flex-1 border border-white px-3 py-2.5 text-xs font-semibold uppercase tracking-wide text-white transition hover:bg-white hover:text-black cursor-pointer\"\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n    </section>\n  );\n\n  // Render folder contents view (subfolders and materials)\n  const renderFolderContentsView = () => {\n    if (!currentFolder) return null;\n\n    return (\n      <section className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4\">\n        {/* Render subfolders first */}\n        {currentFolder.subfolders.map((subfolder) => {\n          const materialCount = subfolder.sections.length;\n          \n          return (\n            <div\n              key={subfolder.id}\n              role=\"button\"\n              tabIndex={0}\n              onClick={() => handleEnterSubfolder(subfolder)}\n              className=\"group relative flex flex-col items-center justify-center border border-slate-800 bg-black p-6 h-[220px] transition hover:border-slate-600 hover:bg-slate-900/50 cursor-pointer text-left\"\n            >\n              <button\n                onClick={(e) => {\n                  e.stopPropagation();\n                  handleDeleteSubfolder(subfolder.id);\n                }}\n                className=\"absolute top-3 right-3 text-slate-600 hover:text-red-400 transition opacity-0 group-hover:opacity-100 cursor-pointer\"\n                title=\"Delete folder\"\n              >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                </svg>\n              </button>\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-12 w-12 text-amber-500 mb-3\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path d=\"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z\" />\n              </svg>\n              <span className=\"text-white font-semibold text-center\">{subfolder.name}</span>\n              <span className=\"text-slate-500 text-xs mt-1\">\n                {subfolder.subfolders.length > 0 && (\n                  <>{subfolder.subfolders.length} folder{subfolder.subfolders.length !== 1 ? \"s\" : \"\"}{materialCount > 0 && \", \"}</>\n                )}\n                {materialCount > 0 && (\n                  <>{materialCount} material{materialCount !== 1 ? \"s\" : \"\"}</>\n                )}\n                {subfolder.subfolders.length === 0 && materialCount === 0 && \"Empty\"}\n              </span>\n            </div>\n          );\n        })}\n\n        {/* Render materials */}\n        {currentFolder.sections.map((material) => (\n          <div\n            key={material.id}\n            role=\"button\"\n            tabIndex={0}\n            onClick={() => handleNavigateToPreview(material.id)}\n            onKeyDown={(e) => {\n              if (e.key === \"Enter\" || e.key === \" \") {\n                e.preventDefault();\n                handleNavigateToPreview(material.id);\n              }\n            }}\n            className=\"group relative flex flex-col border border-slate-800 bg-black p-4 h-[220px] cursor-pointer transition hover:border-slate-600 hover:bg-slate-900/50\"\n          >\n            <button\n              onClick={(e) => {\n                e.stopPropagation();\n                handleDeleteMaterial(material.id);\n              }}\n              className=\"absolute top-3 right-3 text-slate-600 hover:text-red-400 transition opacity-0 group-hover:opacity-100 cursor-pointer\"\n              title=\"Delete material\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n              </svg>\n            </button>\n            <div className=\"flex-shrink-0\">\n              <h3 className=\"text-lg font-semibold text-white pr-6\">{material.title}</h3>\n              <p className=\"mt-0.5 text-sm text-slate-400 line-clamp-1\">{material.description}</p>\n            </div>\n            <div className=\"mt-2 flex-1 overflow-hidden\">\n              {material.files.length === 0 ? (\n                <p className=\"text-sm text-slate-500 italic\">No files yet</p>\n              ) : (\n                <div className=\"space-y-1\">\n                  {material.files.slice(0, 2).map((file) => (\n                    <div\n                      key={file.id}\n                      className=\"flex items-center justify-between bg-slate-800/50 px-2 py-1 ring-1 ring-slate-700\"\n                    >\n                      <span className=\"text-sm text-slate-300 truncate flex-1\">{file.name}</span>\n                    </div>\n                  ))}\n                  {material.files.length > 2 && (\n                    <p className=\"text-sm text-slate-500\">+{material.files.length - 2} more</p>\n                  )}\n                </div>\n              )}\n            </div>\n            <div className=\"flex-shrink-0 mt-2 flex gap-2\">\n              <span className=\"flex-1 inline-flex items-center justify-center bg-slate-800 border border-slate-600 px-2 py-1.5 text-xs font-medium text-slate-300\">\n                {material.files.length} file{material.files.length !== 1 ? 's' : ''}\n              </span>\n              <button\n                onClick={(e) => {\n                  e.stopPropagation();\n                  handleNavigateToPreview(material.id);\n                }}\n                className=\"inline-flex cursor-pointer items-center justify-center bg-white border border-white px-3 py-1.5 text-xs font-semibold uppercase tracking-wide text-black transition hover:bg-black hover:text-white\"\n              >\n                Open\n              </button>\n            </div>\n          </div>\n        ))}\n\n        {/* Add Subfolder Card */}\n        <div className=\"h-[220px]\">\n          {!isAddingFolder ? (\n            <button\n              onClick={() => setIsAddingFolder(true)}\n              className=\"flex h-full w-full flex-col items-center justify-center text-slate-500 hover:text-slate-300 border border-slate-800 border-dashed bg-black hover:border-slate-600 hover:bg-slate-900/50 transition cursor-pointer p-6\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-10 w-10 mb-2 text-amber-500/70\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path d=\"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z\" />\n              </svg>\n              <span className=\"text-sm font-semibold\">Add Folder</span>\n              <span className=\"mt-1 text-xs\">Create a subfolder</span>\n            </button>\n          ) : (\n            <div className=\"flex h-full flex-col justify-between border border-slate-800 bg-black p-5\">\n              <div>\n                <h3 className=\"text-base font-semibold text-white\">New Folder</h3>\n              </div>\n              <div className=\"flex flex-col justify-center\">\n                <input\n                  type=\"text\"\n                  value={newFolderName}\n                  onChange={(e) => setNewFolderName(e.target.value)}\n                  onKeyDown={(e) => {\n                    if (e.key === \"Enter\" && newFolderName.trim()) {\n                      handleAddSubfolder();\n                    } else if (e.key === \"Escape\") {\n                      setIsAddingFolder(false);\n                      setNewFolderName(\"\");\n                    }\n                  }}\n                  placeholder=\"e.g., Midterm, Final Project\"\n                  className=\"w-full bg-slate-800 border border-slate-700 px-3 py-2.5 text-sm text-white placeholder-slate-500 focus:border-white focus:outline-none focus:ring-1 focus:ring-white\"\n                  autoFocus\n                />\n              </div>\n              <div className=\"flex gap-2 mt-2\">\n                <button\n                  onClick={handleAddSubfolder}\n                  disabled={!newFolderName.trim()}\n                  className=\"flex-1 bg-white border border-white px-3 py-2.5 text-xs font-semibold uppercase tracking-wide text-black transition hover:bg-black hover:text-white disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer\"\n                >\n                  Create\n                </button>\n                <button\n                  onClick={() => {\n                    setIsAddingFolder(false);\n                    setNewFolderName(\"\");\n                  }}\n                  className=\"flex-1 border border-white px-3 py-2.5 text-xs font-semibold uppercase tracking-wide text-white transition hover:bg-white hover:text-black cursor-pointer\"\n                >\n                  Cancel\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Add Material Card */}\n        <div className=\"h-[220px]\">\n          {!isAddingMaterial ? (\n            <button\n              onClick={() => setIsAddingMaterial(true)}\n              className=\"flex h-full w-full flex-col items-center justify-center text-slate-500 hover:text-slate-300 border border-slate-800 border-dashed bg-black hover:border-slate-600 hover:bg-slate-900/50 transition cursor-pointer p-6\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-10 w-10 mb-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M12 4v16m8-8H4\" />\n              </svg>\n              <span className=\"text-sm font-semibold\">Add Material</span>\n              <span className=\"mt-1 text-xs\">Create a material category</span>\n            </button>\n          ) : (\n            <div className=\"flex h-full flex-col justify-between border border-slate-800 bg-black p-5\">\n              <div>\n                <h3 className=\"text-base font-semibold text-white\">New Material</h3>\n              </div>\n              <div className=\"flex flex-col gap-3\">\n                <input\n                  type=\"text\"\n                  value={newMaterialName}\n                  onChange={(e) => setNewMaterialName(e.target.value)}\n                  onKeyDown={(e) => {\n                    if (e.key === \"Enter\" && newMaterialName.trim()) {\n                      handleAddMaterial();\n                    } else if (e.key === \"Escape\") {\n                      setIsAddingMaterial(false);\n                      setNewMaterialName(\"\");\n                      setNewMaterialDescription(\"\");\n                    }\n                  }}\n                  placeholder=\"e.g., Textbooks, Lecture Notes\"\n                  className=\"w-full bg-slate-800 border border-slate-700 px-3 py-2.5 text-sm text-white placeholder-slate-500 focus:border-white focus:outline-none focus:ring-1 focus:ring-white\"\n                  autoFocus\n                />\n                <input\n                  type=\"text\"\n                  value={newMaterialDescription}\n                  onChange={(e) => setNewMaterialDescription(e.target.value)}\n                  onKeyDown={(e) => {\n                    if (e.key === \"Enter\" && newMaterialName.trim()) {\n                      handleAddMaterial();\n                    } else if (e.key === \"Escape\") {\n                      setIsAddingMaterial(false);\n                      setNewMaterialName(\"\");\n                      setNewMaterialDescription(\"\");\n                    }\n                  }}\n                  placeholder=\"Description (optional)\"\n                  className=\"w-full bg-slate-800 border border-slate-700 px-3 py-2.5 text-sm text-white placeholder-slate-500 focus:border-white focus:outline-none focus:ring-1 focus:ring-white\"\n                />\n              </div>\n              <div className=\"flex gap-2 mt-2\">\n                <button\n                  onClick={handleAddMaterial}\n                  disabled={!newMaterialName.trim()}\n                  className=\"flex-1 bg-white border border-white px-3 py-2.5 text-xs font-semibold uppercase tracking-wide text-black transition hover:bg-black hover:text-white disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer\"\n                >\n                  Create\n                </button>\n                <button\n                  onClick={() => {\n                    setIsAddingMaterial(false);\n                    setNewMaterialName(\"\");\n                    setNewMaterialDescription(\"\");\n                  }}\n                  className=\"flex-1 border border-white px-3 py-2.5 text-xs font-semibold uppercase tracking-wide text-white transition hover:bg-white hover:text-black cursor-pointer\"\n                >\n                  Cancel\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </section>\n    );\n  };\n\n  // Get header content\n  const getHeaderContent = () => {\n    if (currentFolder) {\n      return {\n        label: \"Course Material\",\n        title: `${currentFolder.name} - Add folders or materials`,\n      };\n    }\n    return {\n      label: \"Course Material\",\n      title: \"Create folders to organize your materials\",\n    };\n  };\n\n  const header = getHeaderContent();\n\n  return (\n    <div className=\"h-full overflow-hidden -mt-4\">\n      {/* Error message */}\n      {error && (\n        <div className=\"mb-4 bg-red-900/30 border border-red-500 px-4 py-3 text-red-300 flex justify-between items-center\">\n          <span>{error}</span>\n          <button onClick={() => setError(null)} className=\"text-red-300 hover:text-red-100\"></button>\n        </div>\n      )}\n\n      <div className=\"flex items-center justify-between mb-6\">\n        <div>\n          <p className=\"text-xs font-semibold uppercase tracking-wide text-indigo-400\">\n            {header.label}\n          </p>\n          <h1 className=\"mt-1 text-2xl font-semibold text-white\">\n            {header.title}\n          </h1>\n        </div>\n        {folderPath.length > 0 && (\n          <div className=\"flex gap-3\">\n            {/* Back button */}\n            <button\n              onClick={() => {\n                if (folderPath.length === 1) {\n                  setFolderPath([]);\n                } else {\n                  setFolderPath((prev) => prev.slice(0, -1));\n                }\n              }}\n              className=\"flex items-center gap-2 border border-white px-4 py-2 text-sm font-semibold text-white transition hover:bg-white hover:text-black cursor-pointer\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n              </svg>\n              {folderPath.length === 1 \n                ? \"Back to Folders\" \n                : folderPath[folderPath.length - 2]?.name}\n            </button>\n            \n            {/* Root folders button - only shown when in subfolder */}\n            {folderPath.length > 1 && (\n              <button\n                onClick={() => setFolderPath([])}\n                className=\"flex items-center gap-2 border border-white px-4 py-2 text-sm font-semibold text-white transition hover:bg-white hover:text-black cursor-pointer\"\n              >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path d=\"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z\" />\n                </svg>\n                Folders\n              </button>\n            )}\n          </div>\n        )}\n      </div>\n\n      {renderBreadcrumb()}\n\n      {folderPath.length === 0 && renderFoldersView()}\n      {currentFolder && renderFolderContentsView()}\n    </div>\n  );\n}\n\nexport default function CourseMaterialPage() {\n  return (\n    <Suspense fallback={\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500\" />\n      </div>\n    }>\n      <CourseMaterialContent />\n    </Suspense>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}